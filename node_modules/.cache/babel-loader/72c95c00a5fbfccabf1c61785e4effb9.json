{"ast":null,"code":"import _regeneratorRuntime from \"E:\\\\2023_2024\\\\IUH_HK2_2022_2023\\\\LTPTDL2\\\\dbank-master\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"E:\\\\2023_2024\\\\IUH_HK2_2022_2023\\\\LTPTDL2\\\\dbank-master\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"E:\\\\2023_2024\\\\IUH_HK2_2022_2023\\\\LTPTDL2\\\\dbank-master\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"E:\\\\2023_2024\\\\IUH_HK2_2022_2023\\\\LTPTDL2\\\\dbank-master\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _inherits from \"E:\\\\2023_2024\\\\IUH_HK2_2022_2023\\\\LTPTDL2\\\\dbank-master\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"E:\\\\2023_2024\\\\IUH_HK2_2022_2023\\\\LTPTDL2\\\\dbank-master\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"E:\\\\2023_2024\\\\IUH_HK2_2022_2023\\\\LTPTDL2\\\\dbank-master\\\\client\\\\src\\\\components\\\\User.js\";\nimport { Tabs, Tab } from 'react-bootstrap';\nimport dBank from '../abis/dBank.json';\nimport React, { Component, useState } from 'react';\nimport Token from '../abis/Token.json';\nimport dbank from '../dbank.png';\nimport Web3 from 'web3';\nimport './App.css';\nimport { userAccount } from './account';\nimport { BrowserRouter as Router, Navigate } from \"react-router-dom\";\nvar amount = JSON.parse(localStorage.getItem('amount')) || [0];\nvar balance = 0;\nvar TokenBalance = 0;\nvar stake = 0;\nvar Lend;\nvar Borrow;\nvar PayOff;\n\nvar Begin = /*#__PURE__*/function (_Component) {\n  _inherits(Begin, _Component);\n\n  var _super = _createSuper(Begin);\n\n  function Begin() {\n    _classCallCheck(this, Begin);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(Begin, [{\n    key: \"render\",\n    value: function render() {\n      if (userAccount === 1) {\n        return /*#__PURE__*/React.createElement(User, {\n          socket: this.props.socket,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 23,\n            columnNumber: 14\n          }\n        });\n      }\n\n      return /*#__PURE__*/React.createElement(Navigate, {\n        to: \"/\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 25,\n          columnNumber: 12\n        }\n      });\n    }\n  }]);\n\n  return Begin;\n}(Component);\n\nexport { Begin as default };\n\nvar User = /*#__PURE__*/function (_Component2) {\n  _inherits(User, _Component2);\n\n  var _super2 = _createSuper(User);\n\n  _createClass(User, [{\n    key: \"connect\",\n    value: function () {\n      var _connect = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.loadBlockchainData(this.props.dispatch);\n\n              case 2:\n                _context.next = 4;\n                return this.state.dbank.methods.getBalance(this.state.account).call({\n                  from: this.state.account\n                });\n\n              case 4:\n                this.state.bankBanlace = _context.sent;\n                _context.next = 7;\n                return this.state.dbank.methods.getToken(this.state.account).call({\n                  from: this.state.account\n                });\n\n              case 7:\n                this.state.TokenBalance = _context.sent;\n                _context.next = 10;\n                return this.state.dbank.methods.getStake(this.state.account).call({\n                  from: this.state.account\n                });\n\n              case 10:\n                this.state.stake = _context.sent;\n                this.state.bankBanlace /= Math.pow(10, 18);\n                this.state.TokenBalance /= Math.pow(10, 18);\n                this.state.stake /= Math.pow(10, 18);\n                console.log(this.state.account, this.state.bankBanlace, this.state.TokenBalance, this.state.stake);\n                this.state.connect = true;\n\n              case 16:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function connect() {\n        return _connect.apply(this, arguments);\n      }\n\n      return connect;\n    }()\n  }, {\n    key: \"loadBlockchainData\",\n    value: function () {\n      var _loadBlockchainData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch) {\n        var web3, netId, accounts, account, _balance, token, _dbank, dBankAddress;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (!(typeof window.ethereum !== 'undefined')) {\n                  _context2.next = 21;\n                  break;\n                }\n\n                web3 = new Web3(window.ethereum);\n                window.ethereum.enable();\n                _context2.next = 5;\n                return web3.eth.net.getId();\n\n              case 5:\n                netId = _context2.sent;\n                _context2.next = 8;\n                return web3.eth.getAccounts();\n\n              case 8:\n                accounts = _context2.sent;\n                account = [];\n\n                if (!(typeof accounts[0] !== 'undefined')) {\n                  _context2.next = 17;\n                  break;\n                }\n\n                _context2.next = 13;\n                return web3.eth.getBalance(accounts[0]);\n\n              case 13:\n                _balance = _context2.sent;\n                this.setState({\n                  account: accounts[0],\n                  balance: _balance,\n                  web3: web3\n                });\n                _context2.next = 18;\n                break;\n\n              case 17:\n                window.alert('Please login with MetaMask');\n\n              case 18:\n                try {\n                  token = new web3.eth.Contract(Token.abi, Token.networks[netId].address);\n                  _dbank = new web3.eth.Contract(dBank.abi, dBank.networks[netId].address);\n                  dBankAddress = dBank.networks[netId].address;\n                  this.setState({\n                    token: token,\n                    dbank: _dbank,\n                    dBankAddress: dBankAddress\n                  });\n                } catch (e) {\n                  console.log('Error', e);\n                  window.alert('Contracts not deployed to the current network');\n                }\n\n                _context2.next = 22;\n                break;\n\n              case 21:\n                window.alert('Please install MetaMask');\n\n              case 22:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function loadBlockchainData(_x) {\n        return _loadBlockchainData.apply(this, arguments);\n      }\n\n      return loadBlockchainData;\n    }()\n  }, {\n    key: \"sendAddress\",\n    value: function () {\n      var _sendAddress = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                this.props.socket.emit('join', this.state.account);\n\n              case 1:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function sendAddress() {\n        return _sendAddress.apply(this, arguments);\n      }\n\n      return sendAddress;\n    }()\n  }, {\n    key: \"coc\",\n    value: function () {\n      var _coc = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(amount) {\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                if (!(this.state.dbank !== 'undefined')) {\n                  _context4.next = 13;\n                  break;\n                }\n\n                _context4.prev = 1;\n                _context4.next = 4;\n                return this.state.dbank.methods.Coc().send({\n                  value: amount.toString(),\n                  from: this.state.account\n                });\n\n              case 4:\n                fetch('http://localhost:3000/method', {\n                  method: 'POST',\n                  headers: {\n                    'Content-Type': 'application/json'\n                  },\n                  body: JSON.stringify({\n                    account: this.state.account,\n                    method: 'ether'\n                  })\n                });\n                localStorage.setItem('amount', 0);\n                window.location.reload();\n                _context4.next = 13;\n                break;\n\n              case 9:\n                _context4.prev = 9;\n                _context4.t0 = _context4[\"catch\"](1);\n                alert('that bai');\n                window.location.reload();\n\n              case 13:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this, [[1, 9]]);\n      }));\n\n      function coc(_x2) {\n        return _coc.apply(this, arguments);\n      }\n\n      return coc;\n    }()\n  }, {\n    key: \"withdraw\",\n    value: function () {\n      var _withdraw = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(e) {\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                e.preventDefault();\n\n                if (!(this.state.dbank !== 'undefined')) {\n                  _context5.next = 11;\n                  break;\n                }\n\n                _context5.prev = 2;\n                _context5.next = 5;\n                return this.state.dbank.methods.withdraw().send({\n                  from: this.state.account\n                });\n\n              case 5:\n                _context5.next = 11;\n                break;\n\n              case 7:\n                _context5.prev = 7;\n                _context5.t0 = _context5[\"catch\"](2);\n                alert('that bai');\n                console.log('Error, withdraw: ', _context5.t0);\n\n              case 11:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this, [[2, 7]]);\n      }));\n\n      function withdraw(_x3) {\n        return _withdraw.apply(this, arguments);\n      }\n\n      return withdraw;\n    }()\n  }, {\n    key: \"CocWithDeposit\",\n    value: function () {\n      var _CocWithDeposit = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(amount) {\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                if (!(this.state.dbank !== 'undefined')) {\n                  _context6.next = 11;\n                  break;\n                }\n\n                _context6.prev = 1;\n                amount = amount * Math.pow(10, 18);\n                _context6.next = 5;\n                return this.state.dbank.methods.CocWithEtherDeposit(amount.toString()).send({\n                  from: this.state.account\n                });\n\n              case 5:\n                fetch('http://localhost:3000/method', {\n                  method: 'POST',\n                  headers: {\n                    'Content-Type': 'application/json'\n                  },\n                  body: JSON.stringify({\n                    account: this.state.account,\n                    method: 'ether'\n                  })\n                });\n                _context6.next = 11;\n                break;\n\n              case 8:\n                _context6.prev = 8;\n                _context6.t0 = _context6[\"catch\"](1);\n                // báo lỗi nếu việc lấy giá trị bị lỗi\n                console.log('Error, deposit: ', _context6.t0);\n\n              case 11:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this, [[1, 8]]);\n      }));\n\n      function CocWithDeposit(_x4) {\n        return _CocWithDeposit.apply(this, arguments);\n      }\n\n      return CocWithDeposit;\n    }()\n  }, {\n    key: \"CocWithToken\",\n    value: function () {\n      var _CocWithToken = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7(amount) {\n        return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                if (!(this.state.dbank !== 'undefined')) {\n                  _context7.next = 13;\n                  break;\n                }\n\n                _context7.prev = 1;\n                amount = amount * Math.pow(10, 18);\n                _context7.next = 5;\n                return this.state.token.methods.approve(this.state.dBankAddress, amount.toString()).send({\n                  from: this.state.account\n                });\n\n              case 5:\n                _context7.next = 7;\n                return this.state.dbank.methods.CocWithToken(amount.toString()).send({\n                  from: this.state.account\n                });\n\n              case 7:\n                fetch('http://localhost:3000/method', {\n                  method: 'POST',\n                  headers: {\n                    'Content-Type': 'application/json'\n                  },\n                  body: JSON.stringify({\n                    account: this.state.account,\n                    method: 'Token'\n                  })\n                });\n                _context7.next = 13;\n                break;\n\n              case 10:\n                _context7.prev = 10;\n                _context7.t0 = _context7[\"catch\"](1);\n                // báo lỗi nếu việc lấy giá trị bị lỗi\n                console.log('Error, deposit: ', _context7.t0);\n\n              case 13:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this, [[1, 10]]);\n      }));\n\n      function CocWithToken(_x5) {\n        return _CocWithToken.apply(this, arguments);\n      }\n\n      return CocWithToken;\n    }()\n  }, {\n    key: \"deposit\",\n    value: function () {\n      var _deposit = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8(amount) {\n        return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                if (!(this.state.dbank !== 'undefined')) {\n                  _context8.next = 9;\n                  break;\n                }\n\n                _context8.prev = 1;\n                _context8.next = 4;\n                return this.state.dbank.methods.deposit().send({\n                  value: amount.toString(),\n                  from: this.state.account\n                });\n\n              case 4:\n                _context8.next = 9;\n                break;\n\n              case 6:\n                _context8.prev = 6;\n                _context8.t0 = _context8[\"catch\"](1);\n                console.log('Error, deposit: ', _context8.t0);\n\n              case 9:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this, [[1, 6]]);\n      }));\n\n      function deposit(_x6) {\n        return _deposit.apply(this, arguments);\n      }\n\n      return deposit;\n    }()\n  }, {\n    key: \"lendToken\",\n    value: function () {\n      var _lendToken = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee9(address, amount, interest) {\n        return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                if (!(this.state.dbank !== 'undefined')) {\n                  _context9.next = 12;\n                  break;\n                }\n\n                _context9.prev = 1;\n                amount = amount * Math.pow(10, 18);\n                _context9.next = 5;\n                return this.state.token.methods.approve(this.state.dBankAddress, amount.toString()).send({\n                  from: this.state.account\n                });\n\n              case 5:\n                _context9.next = 7;\n                return this.state.dbank.methods.lendToken(address, interest).send({\n                  value: amount,\n                  from: this.state.account\n                });\n\n              case 7:\n                _context9.next = 12;\n                break;\n\n              case 9:\n                _context9.prev = 9;\n                _context9.t0 = _context9[\"catch\"](1);\n                // báo lỗi nếu việc lấy giá trị bị lỗi\n                console.log('Error, deposit: ', _context9.t0);\n\n              case 12:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9, this, [[1, 9]]);\n      }));\n\n      function lendToken(_x7, _x8, _x9) {\n        return _lendToken.apply(this, arguments);\n      }\n\n      return lendToken;\n    }()\n  }, {\n    key: \"lend\",\n    value: function () {\n      var _lend = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee10(address, amountSend, interest) {\n        return _regeneratorRuntime.wrap(function _callee10$(_context10) {\n          while (1) {\n            switch (_context10.prev = _context10.next) {\n              case 0:\n                if (!(this.state.dbank !== 'undefined')) {\n                  _context10.next = 10;\n                  break;\n                }\n\n                _context10.prev = 1;\n                amountSend *= Math.pow(10, 18); // Sau đó trả lại cho người dùng tiền đã thế chấp\n\n                _context10.next = 5;\n                return this.state.dbank.methods.lendEther(address, amountSend.toString(), interest).send({\n                  from: this.state.account\n                });\n\n              case 5:\n                _context10.next = 10;\n                break;\n\n              case 7:\n                _context10.prev = 7;\n                _context10.t0 = _context10[\"catch\"](1);\n                console.log('Error, deposit: ', _context10.t0);\n\n              case 10:\n              case \"end\":\n                return _context10.stop();\n            }\n          }\n        }, _callee10, this, [[1, 7]]);\n      }));\n\n      function lend(_x10, _x11, _x12) {\n        return _lend.apply(this, arguments);\n      }\n\n      return lend;\n    }()\n  }, {\n    key: \"lendDerectly\",\n    value: function () {\n      var _lendDerectly = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee11(address, amountSend, interest) {\n        return _regeneratorRuntime.wrap(function _callee11$(_context11) {\n          while (1) {\n            switch (_context11.prev = _context11.next) {\n              case 0:\n                if (!(this.state.dbank !== 'undefined')) {\n                  _context11.next = 10;\n                  break;\n                }\n\n                _context11.prev = 1;\n                amountSend *= Math.pow(10, 18);\n                _context11.next = 5;\n                return this.state.dbank.methods.lendEtherDerectly(address, interest).send({\n                  value: amountSend.toString(),\n                  from: this.state.account\n                });\n\n              case 5:\n                _context11.next = 10;\n                break;\n\n              case 7:\n                _context11.prev = 7;\n                _context11.t0 = _context11[\"catch\"](1);\n                console.log('Error, deposit: ', _context11.t0);\n\n              case 10:\n              case \"end\":\n                return _context11.stop();\n            }\n          }\n        }, _callee11, this, [[1, 7]]);\n      }));\n\n      function lendDerectly(_x13, _x14, _x15) {\n        return _lendDerectly.apply(this, arguments);\n      }\n\n      return lendDerectly;\n    }()\n  }, {\n    key: \"payOffEther\",\n    value: function () {\n      var _payOffEther = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee12(address) {\n        return _regeneratorRuntime.wrap(function _callee12$(_context12) {\n          while (1) {\n            switch (_context12.prev = _context12.next) {\n              case 0:\n                if (!(this.state.dbank !== 'undefined')) {\n                  _context12.next = 9;\n                  break;\n                }\n\n                _context12.prev = 1;\n                _context12.next = 4;\n                return this.state.dbank.methods.payOffEther(address).send({\n                  from: this.state.account\n                });\n\n              case 4:\n                _context12.next = 9;\n                break;\n\n              case 6:\n                _context12.prev = 6;\n                _context12.t0 = _context12[\"catch\"](1);\n                console.log('Error, deposit: ', _context12.t0);\n\n              case 9:\n              case \"end\":\n                return _context12.stop();\n            }\n          }\n        }, _callee12, this, [[1, 6]]);\n      }));\n\n      function payOffEther(_x16) {\n        return _payOffEther.apply(this, arguments);\n      }\n\n      return payOffEther;\n    }()\n  }, {\n    key: \"payOffToken\",\n    value: function () {\n      var _payOffToken = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee13(address) {\n        return _regeneratorRuntime.wrap(function _callee13$(_context13) {\n          while (1) {\n            switch (_context13.prev = _context13.next) {\n              case 0:\n                if (!(this.state.dbank !== 'undefined')) {\n                  _context13.next = 12;\n                  break;\n                }\n\n                _context13.prev = 1;\n                amount = amount * Math.pow(10, 18);\n                _context13.next = 5;\n                return this.state.token.methods.approve(this.state.dBankAddress).send({\n                  from: this.state.account\n                });\n\n              case 5:\n                _context13.next = 7;\n                return this.state.dbank.methods.payOffToken(address).send({\n                  from: this.state.account\n                });\n\n              case 7:\n                _context13.next = 12;\n                break;\n\n              case 9:\n                _context13.prev = 9;\n                _context13.t0 = _context13[\"catch\"](1);\n                // báo lỗi nếu việc lấy giá trị bị lỗi\n                console.log('Error, deposit: ', _context13.t0);\n\n              case 12:\n              case \"end\":\n                return _context13.stop();\n            }\n          }\n        }, _callee13, this, [[1, 9]]);\n      }));\n\n      function payOffToken(_x17) {\n        return _payOffToken.apply(this, arguments);\n      }\n\n      return payOffToken;\n    }()\n  }]);\n\n  function User(props) {\n    var _this;\n\n    _classCallCheck(this, User);\n\n    _this = _super2.call(this, props);\n\n    _this.handleRequest = function (e) {\n      e.preventDefault();\n      var account = _this.state.account;\n      console.log(account);\n      return fetch('http://localhost:3000/request', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          account: account\n        })\n      }).then(function (res) {\n        if (!res.ok) {\n          throw new Error('Network response was not ok');\n        }\n\n        return res.json();\n      }).then(function (data) {\n        localStorage.setItem('amount', data);\n        window.location.reload();\n      }).catch(function (error) {\n        console.error('Error:', error);\n      });\n    };\n\n    _this.state = {\n      web3: 'undefined',\n      account: '',\n      token: null,\n      dbank: null,\n      balance: 0,\n      dBankAddress: null,\n      bankBanlace: 0,\n      TokenBalance: 0,\n      stake: 0,\n      connect: false\n    };\n    return _this;\n  } // dùng để tạo giao diện website \n\n\n  _createClass(User, [{\n    key: \"render\",\n    value: function render() {\n      console.log(this.state.TokenBalance);\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text-monospace\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 7\n        }\n      }, \"()\");\n    }\n  }]);\n\n  return User;\n}(Component);","map":{"version":3,"sources":["E:/2023_2024/IUH_HK2_2022_2023/LTPTDL2/dbank-master/client/src/components/User.js"],"names":["Tabs","Tab","dBank","React","Component","useState","Token","dbank","Web3","userAccount","BrowserRouter","Router","Navigate","amount","JSON","parse","localStorage","getItem","balance","TokenBalance","stake","Lend","Borrow","PayOff","Begin","props","socket","User","loadBlockchainData","dispatch","state","methods","getBalance","account","call","from","bankBanlace","getToken","getStake","console","log","connect","window","ethereum","web3","enable","eth","net","getId","netId","getAccounts","accounts","setState","alert","token","Contract","abi","networks","address","dBankAddress","e","emit","Coc","send","value","toString","fetch","method","headers","body","stringify","setItem","location","reload","preventDefault","withdraw","CocWithEtherDeposit","approve","CocWithToken","deposit","interest","lendToken","amountSend","lendEther","lendEtherDerectly","payOffEther","payOffToken","handleRequest","then","res","ok","Error","json","data","catch","error"],"mappings":"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","sourcesContent":["import { Tabs, Tab } from 'react-bootstrap'\r\nimport dBank from '../abis/dBank.json'\r\nimport React, { Component,useState } from 'react';\r\nimport Token from '../abis/Token.json'\r\nimport dbank from '../dbank.png';\r\nimport Web3 from 'web3';\r\nimport './App.css';\r\nimport {userAccount} from './account';\r\nimport {\r\n    BrowserRouter as Router,\r\n    Navigate \r\n}from \"react-router-dom\"\r\nlet amount = JSON.parse(localStorage.getItem('amount')) || [0]; \r\nlet balance = 0;\r\nlet TokenBalance = 0;\r\nlet stake = 0;\r\nlet Lend;\r\nlet Borrow;\r\nlet PayOff;\r\nexport default class Begin extends Component{\r\n  render (){\r\n    if(userAccount === 1){\r\n      return <User socket = {this.props.socket}/>\r\n    }\r\n    return <Navigate to=\"/\" />\r\n  }\r\n}\r\n\r\nclass User extends Component{\r\n  async connect() {\r\n    await this.loadBlockchainData(this.props.dispatch)\r\n    this.state.bankBanlace = await this.state.dbank.methods.getBalance(this.state.account).call({from:this.state.account});\r\n    this.state.TokenBalance = await this.state.dbank.methods.getToken(this.state.account).call({from:this.state.account});\r\n    this.state.stake = await this.state.dbank.methods.getStake(this.state.account).call({from:this.state.account});\r\n    this.state.bankBanlace /= 10**18\r\n    this.state.TokenBalance /= 10**18\r\n    this.state.stake /= 10**18\r\n    console.log(this.state.account, this.state.bankBanlace, this.state.TokenBalance, this.state.stake)\r\n    this.state.connect = true;\r\n  }\r\n  async loadBlockchainData(dispatch) {\r\n    if(typeof window.ethereum !== 'undefined'){\r\n      const web3 = new Web3(window.ethereum)\r\n      window.ethereum.enable();\r\n      const netId = await web3.eth.net.getId()\r\n      const accounts = await web3.eth.getAccounts()\r\n      const account =[];\r\n      if(typeof accounts[0] !== 'undefined'){\r\n        const balance = await web3.eth.getBalance(accounts[0])\r\n        this.setState({account: accounts[0], balance: balance, web3: web3})\r\n      } else {\r\n        window.alert('Please login with MetaMask')\r\n      }\r\n      try{\r\n        const token = new web3.eth.Contract(Token.abi, Token.networks[netId].address)\r\n        const dbank = new web3.eth.Contract(dBank.abi, dBank.networks[netId].address)\r\n        const dBankAddress = dBank.networks[netId].address\r\n        this.setState({token: token, dbank: dbank, dBankAddress: dBankAddress})\r\n        \r\n      } catch (e) {\r\n        console.log('Error', e)\r\n        window.alert('Contracts not deployed to the current network')\r\n      }\r\n    } else {\r\n      window.alert('Please install MetaMask')\r\n    }\r\n  }\r\n  async sendAddress(){\r\n    this.props.socket.emit('join',this.state.account);\r\n  }\r\n  handleRequest = (e) => {\r\n  e.preventDefault();\r\n  let account = this.state.account;\r\n      console.log(account);\r\n  return fetch('http://localhost:3000/request', {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify({account: account}),\r\n  })\r\n    .then((res) => {\r\n      if (!res.ok) {\r\n        throw new Error('Network response was not ok');\r\n      }\r\n      return res.json();\r\n    })\r\n    .then((data) => {\r\n      localStorage.setItem('amount',data);\r\n      window.location.reload();\r\n    })\r\n    .catch((error) => {\r\n      console.error('Error:', error);\r\n    });\r\n};\r\n  async coc(amount) {\r\n    if(this.state.dbank!=='undefined'){\r\n      try{\r\n      await this.state.dbank.methods.Coc().send({value: amount.toString(), from: this.state.account});\r\n      fetch('http://localhost:3000/method', {\r\n          method: 'POST',\r\n          headers: {\r\n          'Content-Type': 'application/json',\r\n          },\r\n          body: JSON.stringify({account: this.state.account, method: 'ether'}),\r\n          })\r\n      localStorage.setItem('amount',0);\r\n      window.location.reload();\r\n      } catch (e) {\r\n        alert('that bai');\r\n            window.location.reload();\r\n      }\r\n    }\r\n  }\r\n  async withdraw(e) {\r\n    e.preventDefault()\r\n    if(this.state.dbank!=='undefined'){\r\n      try{\r\n        await this.state.dbank.methods.withdraw().send({from: this.state.account})\r\n      } catch(e) {\r\n        alert('that bai');\r\n        console.log('Error, withdraw: ', e)\r\n      }\r\n    }\r\n  }\r\n  async CocWithDeposit(amount){\r\n    if(this.state.dbank!=='undefined'){\r\n      try{\r\n        amount = amount * 10**18\r\n        await this.state.dbank.methods.CocWithEtherDeposit(amount.toString()).send({from:this.state.account});\r\n        fetch('http://localhost:3000/method', {\r\n          method: 'POST',\r\n          headers: {\r\n          'Content-Type': 'application/json',\r\n          },\r\n          body: JSON.stringify({account: this.state.account, method: 'ether'}),\r\n          })\r\n        } catch (e) {\r\n        // báo lỗi nếu việc lấy giá trị bị lỗi\r\n        console.log('Error, deposit: ', e)\r\n      }\r\n    }\r\n  }\r\n  async CocWithToken(amount){\r\n    if(this.state.dbank!=='undefined'){\r\n      try{\r\n        amount = amount * 10**18;\r\n        await this.state.token.methods.approve(this.state.dBankAddress, amount.toString()).send({from: this.state.account})\r\n        await this.state.dbank.methods.CocWithToken(amount.toString()).send({from:this.state.account});\r\n        fetch('http://localhost:3000/method', {\r\n          method: 'POST',\r\n          headers: {\r\n          'Content-Type': 'application/json',\r\n          },\r\n          body: JSON.stringify({account: this.state.account, method: 'Token'}),\r\n          })\r\n        \r\n        } catch (e) {\r\n        // báo lỗi nếu việc lấy giá trị bị lỗi\r\n        console.log('Error, deposit: ', e)\r\n      }\r\n    }\r\n  }\r\n  async deposit(amount) {\r\n    if(this.state.dbank!=='undefined'){\r\n      try{\r\n        await this.state.dbank.methods.deposit().send({value: amount.toString(), from: this.state.account})\r\n      } catch (e) {\r\n        console.log('Error, deposit: ', e)\r\n      }\r\n    }\r\n  }\r\n  async lendToken(address, amount, interest){\r\n    if(this.state.dbank!=='undefined'){\r\n      try{\r\n        amount = amount * 10**18;\r\n        await this.state.token.methods.approve(this.state.dBankAddress, amount.toString()).send({from: this.state.account})\r\n        await this.state.dbank.methods.lendToken(address, interest).send({value: amount, from:this.state.account});\r\n        } catch (e) {\r\n        // báo lỗi nếu việc lấy giá trị bị lỗi\r\n        console.log('Error, deposit: ', e)\r\n      }\r\n    }\r\n  }\r\n  async lend(address,amountSend,interest) {\r\n    if(this.state.dbank!=='undefined'){\r\n      try{\r\n        amountSend *= 10**18\r\n        // Sau đó trả lại cho người dùng tiền đã thế chấp\r\n        await this.state.dbank.methods.lendEther(address,amountSend.toString(),interest).send({from: this.state.account});\r\n      } catch (e) {\r\n        console.log('Error, deposit: ', e)\r\n      }\r\n    }\r\n  }\r\n  async lendDerectly(address,amountSend,interest) {\r\n    if(this.state.dbank!=='undefined'){\r\n      try{\r\n        amountSend *= 10**18\r\n        await this.state.dbank.methods.lendEtherDerectly(address,interest).send({value: amountSend.toString(),from: this.state.account});\r\n      } catch (e) {\r\n        console.log('Error, deposit: ', e)\r\n      }\r\n    }\r\n  }\r\n  async payOffEther(address) {\r\n    if(this.state.dbank!=='undefined'){\r\n      try{\r\n        await this.state.dbank.methods.payOffEther(address).send({from: this.state.account});\r\n      } catch (e) {\r\n        console.log('Error, deposit: ', e)\r\n      }\r\n    }\r\n  }\r\n  async payOffToken(address){\r\n    if(this.state.dbank!=='undefined'){\r\n      try{\r\n        amount = amount * 10**18;\r\n        await this.state.token.methods.approve(this.state.dBankAddress).send({from: this.state.account})\r\n        await this.state.dbank.methods.payOffToken(address).send({ from:this.state.account});\r\n        } catch (e) {\r\n        // báo lỗi nếu việc lấy giá trị bị lỗi\r\n        console.log('Error, deposit: ', e)\r\n      }\r\n    }\r\n  }\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      web3: 'undefined',\r\n      account: '',\r\n      token: null,\r\n      dbank: null,\r\n      balance: 0,\r\n      dBankAddress: null,\r\n      bankBanlace: 0,\r\n      TokenBalance: 0,\r\n      stake: 0,\r\n      connect: false\r\n    }\r\n  }\r\n\r\n  // dùng để tạo giao diện website \r\n  render() {\r\n    console.log(this.state.TokenBalance)\r\n    return (\r\n      <div className='text-monospace'>\r\n        ()\r\n      </div>\r\n    );\r\n  }\r\n}"]},"metadata":{},"sourceType":"module"}