{"ast":null,"code":"import _regeneratorRuntime from \"E:\\\\2023_2024\\\\IUH_HK2_2022_2023\\\\LTPTDL2\\\\dbank-master\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"E:\\\\2023_2024\\\\IUH_HK2_2022_2023\\\\LTPTDL2\\\\dbank-master\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"E:\\\\2023_2024\\\\IUH_HK2_2022_2023\\\\LTPTDL2\\\\dbank-master\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"E:\\\\2023_2024\\\\IUH_HK2_2022_2023\\\\LTPTDL2\\\\dbank-master\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _inherits from \"E:\\\\2023_2024\\\\IUH_HK2_2022_2023\\\\LTPTDL2\\\\dbank-master\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"E:\\\\2023_2024\\\\IUH_HK2_2022_2023\\\\LTPTDL2\\\\dbank-master\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"E:\\\\2023_2024\\\\IUH_HK2_2022_2023\\\\LTPTDL2\\\\dbank-master\\\\client\\\\src\\\\components\\\\User.js\";\nimport { Tabs, Tab } from 'react-bootstrap';\nimport dBank from '../abis/dBank.json';\nimport React, { Component, useState, useEffect } from 'react';\nimport Token from '../abis/Token.json';\nimport dbank from '../dbank.png';\nimport Web3 from 'web3';\nimport './App.css';\nimport { userAccount } from './account';\nimport { BrowserRouter as Router, Navigate } from \"react-router-dom\";\nvar amount = JSON.parse(localStorage.getItem('amount')) || [0];\nvar balance = 0;\nvar TokenBalance = 0;\nvar stake = 0;\nvar Lend;\nvar Borrow;\nvar PayOff;\n\nvar Begin = /*#__PURE__*/function (_Component) {\n  _inherits(Begin, _Component);\n\n  var _super = _createSuper(Begin);\n\n  function Begin() {\n    _classCallCheck(this, Begin);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(Begin, [{\n    key: \"render\",\n    value: function render() {\n      if (userAccount === 1) {\n        return /*#__PURE__*/React.createElement(Connect, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 23,\n            columnNumber: 14\n          }\n        });\n      }\n\n      return /*#__PURE__*/React.createElement(Navigate, {\n        to: \"/\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 25,\n          columnNumber: 12\n        }\n      });\n    }\n  }]);\n\n  return Begin;\n}(Component);\n\nexport { Begin as default };\n\nfunction Connect() {\n  function componentWillMount() {\n    return _componentWillMount.apply(this, arguments);\n  }\n\n  function _componentWillMount() {\n    _componentWillMount = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return this.loadBlockchainData(this.props.dispatch);\n\n            case 2:\n              alert('connect');\n\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this);\n    }));\n    return _componentWillMount.apply(this, arguments);\n  }\n\n  function loadBlockchainData(_x) {\n    return _loadBlockchainData.apply(this, arguments);\n  }\n\n  function _loadBlockchainData() {\n    _loadBlockchainData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch) {\n      var web3, netId, accounts, account, _balance, token, _dbank, dBankAddress;\n\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              if (!(typeof window.ethereum !== 'undefined')) {\n                _context2.next = 21;\n                break;\n              }\n\n              web3 = new Web3(window.ethereum);\n              window.ethereum.enable();\n              _context2.next = 5;\n              return web3.eth.net.getId();\n\n            case 5:\n              netId = _context2.sent;\n              _context2.next = 8;\n              return web3.eth.getAccounts();\n\n            case 8:\n              accounts = _context2.sent;\n              account = [];\n\n              if (!(typeof accounts[0] !== 'undefined')) {\n                _context2.next = 17;\n                break;\n              }\n\n              _context2.next = 13;\n              return web3.eth.getBalance(accounts[0]);\n\n            case 13:\n              _balance = _context2.sent;\n              this.setState({\n                account: accounts[0],\n                balance: _balance,\n                web3: web3\n              });\n              _context2.next = 18;\n              break;\n\n            case 17:\n              window.alert('Please login with MetaMask');\n\n            case 18:\n              try {\n                token = new web3.eth.Contract(Token.abi, Token.networks[netId].address);\n                _dbank = new web3.eth.Contract(dBank.abi, dBank.networks[netId].address);\n                dBankAddress = dBank.networks[netId].address;\n                this.setState({\n                  token: token,\n                  dbank: _dbank,\n                  dBankAddress: dBankAddress\n                });\n              } catch (e) {\n                console.log('Error', e);\n                window.alert('Contracts not deployed to the current network');\n              }\n\n              _context2.next = 22;\n              break;\n\n            case 21:\n              window.alert('Please install MetaMask');\n\n            case 22:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, this);\n    }));\n    return _loadBlockchainData.apply(this, arguments);\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onLoad: componentWillMount,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }\n  }));\n}\n\nvar User = /*#__PURE__*/function (_Component2) {\n  _inherits(User, _Component2);\n\n  var _super2 = _createSuper(User);\n\n  _createClass(User, [{\n    key: \"sendAddress\",\n    value: function () {\n      var _sendAddress = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                this.props.socket.emit('join', this.state.account);\n\n              case 1:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function sendAddress() {\n        return _sendAddress.apply(this, arguments);\n      }\n\n      return sendAddress;\n    }()\n  }, {\n    key: \"coc\",\n    value: function () {\n      var _coc = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(amount) {\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                if (!(this.state.dbank !== 'undefined')) {\n                  _context4.next = 13;\n                  break;\n                }\n\n                _context4.prev = 1;\n                _context4.next = 4;\n                return this.state.dbank.methods.Coc().send({\n                  value: amount.toString(),\n                  from: this.state.account\n                });\n\n              case 4:\n                fetch('http://localhost:3000/method', {\n                  method: 'POST',\n                  headers: {\n                    'Content-Type': 'application/json'\n                  },\n                  body: JSON.stringify({\n                    account: this.state.account,\n                    method: 'ether'\n                  })\n                });\n                localStorage.setItem('amount', 0);\n                window.location.reload();\n                _context4.next = 13;\n                break;\n\n              case 9:\n                _context4.prev = 9;\n                _context4.t0 = _context4[\"catch\"](1);\n                alert('that bai');\n                window.location.reload();\n\n              case 13:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this, [[1, 9]]);\n      }));\n\n      function coc(_x2) {\n        return _coc.apply(this, arguments);\n      }\n\n      return coc;\n    }()\n  }, {\n    key: \"withdraw\",\n    value: function () {\n      var _withdraw = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(e) {\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                e.preventDefault();\n\n                if (!(this.state.dbank !== 'undefined')) {\n                  _context5.next = 11;\n                  break;\n                }\n\n                _context5.prev = 2;\n                _context5.next = 5;\n                return this.state.dbank.methods.withdraw().send({\n                  from: this.state.account\n                });\n\n              case 5:\n                _context5.next = 11;\n                break;\n\n              case 7:\n                _context5.prev = 7;\n                _context5.t0 = _context5[\"catch\"](2);\n                alert('that bai');\n                console.log('Error, withdraw: ', _context5.t0);\n\n              case 11:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this, [[2, 7]]);\n      }));\n\n      function withdraw(_x3) {\n        return _withdraw.apply(this, arguments);\n      }\n\n      return withdraw;\n    }()\n  }, {\n    key: \"CocWithDeposit\",\n    value: function () {\n      var _CocWithDeposit = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(amount) {\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                if (!(this.state.dbank !== 'undefined')) {\n                  _context6.next = 11;\n                  break;\n                }\n\n                _context6.prev = 1;\n                amount = amount * Math.pow(10, 18);\n                _context6.next = 5;\n                return this.state.dbank.methods.CocWithEtherDeposit(amount.toString()).send({\n                  from: this.state.account\n                });\n\n              case 5:\n                fetch('http://localhost:3000/method', {\n                  method: 'POST',\n                  headers: {\n                    'Content-Type': 'application/json'\n                  },\n                  body: JSON.stringify({\n                    account: this.state.account,\n                    method: 'ether'\n                  })\n                });\n                _context6.next = 11;\n                break;\n\n              case 8:\n                _context6.prev = 8;\n                _context6.t0 = _context6[\"catch\"](1);\n                // báo lỗi nếu việc lấy giá trị bị lỗi\n                console.log('Error, deposit: ', _context6.t0);\n\n              case 11:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this, [[1, 8]]);\n      }));\n\n      function CocWithDeposit(_x4) {\n        return _CocWithDeposit.apply(this, arguments);\n      }\n\n      return CocWithDeposit;\n    }()\n  }, {\n    key: \"CocWithToken\",\n    value: function () {\n      var _CocWithToken = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7(amount) {\n        return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                if (!(this.state.dbank !== 'undefined')) {\n                  _context7.next = 13;\n                  break;\n                }\n\n                _context7.prev = 1;\n                amount = amount * Math.pow(10, 18);\n                _context7.next = 5;\n                return this.state.token.methods.approve(this.state.dBankAddress, amount.toString()).send({\n                  from: this.state.account\n                });\n\n              case 5:\n                _context7.next = 7;\n                return this.state.dbank.methods.CocWithToken(amount.toString()).send({\n                  from: this.state.account\n                });\n\n              case 7:\n                fetch('http://localhost:3000/method', {\n                  method: 'POST',\n                  headers: {\n                    'Content-Type': 'application/json'\n                  },\n                  body: JSON.stringify({\n                    account: this.state.account,\n                    method: 'Token'\n                  })\n                });\n                _context7.next = 13;\n                break;\n\n              case 10:\n                _context7.prev = 10;\n                _context7.t0 = _context7[\"catch\"](1);\n                // báo lỗi nếu việc lấy giá trị bị lỗi\n                console.log('Error, deposit: ', _context7.t0);\n\n              case 13:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this, [[1, 10]]);\n      }));\n\n      function CocWithToken(_x5) {\n        return _CocWithToken.apply(this, arguments);\n      }\n\n      return CocWithToken;\n    }()\n  }, {\n    key: \"deposit\",\n    value: function () {\n      var _deposit = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8(amount) {\n        return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                if (!(this.state.dbank !== 'undefined')) {\n                  _context8.next = 9;\n                  break;\n                }\n\n                _context8.prev = 1;\n                _context8.next = 4;\n                return this.state.dbank.methods.deposit().send({\n                  value: amount.toString(),\n                  from: this.state.account\n                });\n\n              case 4:\n                _context8.next = 9;\n                break;\n\n              case 6:\n                _context8.prev = 6;\n                _context8.t0 = _context8[\"catch\"](1);\n                console.log('Error, deposit: ', _context8.t0);\n\n              case 9:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this, [[1, 6]]);\n      }));\n\n      function deposit(_x6) {\n        return _deposit.apply(this, arguments);\n      }\n\n      return deposit;\n    }()\n  }, {\n    key: \"lendToken\",\n    value: function () {\n      var _lendToken = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee9(address, amount, interest) {\n        return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                if (!(this.state.dbank !== 'undefined')) {\n                  _context9.next = 12;\n                  break;\n                }\n\n                _context9.prev = 1;\n                amount = amount * Math.pow(10, 18);\n                _context9.next = 5;\n                return this.state.token.methods.approve(this.state.dBankAddress, amount.toString()).send({\n                  from: this.state.account\n                });\n\n              case 5:\n                _context9.next = 7;\n                return this.state.dbank.methods.lendToken(address, interest).send({\n                  value: amount,\n                  from: this.state.account\n                });\n\n              case 7:\n                _context9.next = 12;\n                break;\n\n              case 9:\n                _context9.prev = 9;\n                _context9.t0 = _context9[\"catch\"](1);\n                // báo lỗi nếu việc lấy giá trị bị lỗi\n                console.log('Error, deposit: ', _context9.t0);\n\n              case 12:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9, this, [[1, 9]]);\n      }));\n\n      function lendToken(_x7, _x8, _x9) {\n        return _lendToken.apply(this, arguments);\n      }\n\n      return lendToken;\n    }()\n  }, {\n    key: \"lend\",\n    value: function () {\n      var _lend = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee10(address, amountSend, interest) {\n        return _regeneratorRuntime.wrap(function _callee10$(_context10) {\n          while (1) {\n            switch (_context10.prev = _context10.next) {\n              case 0:\n                if (!(this.state.dbank !== 'undefined')) {\n                  _context10.next = 10;\n                  break;\n                }\n\n                _context10.prev = 1;\n                amountSend *= Math.pow(10, 18); // Sau đó trả lại cho người dùng tiền đã thế chấp\n\n                _context10.next = 5;\n                return this.state.dbank.methods.lendEther(address, amountSend.toString(), interest).send({\n                  from: this.state.account\n                });\n\n              case 5:\n                _context10.next = 10;\n                break;\n\n              case 7:\n                _context10.prev = 7;\n                _context10.t0 = _context10[\"catch\"](1);\n                console.log('Error, deposit: ', _context10.t0);\n\n              case 10:\n              case \"end\":\n                return _context10.stop();\n            }\n          }\n        }, _callee10, this, [[1, 7]]);\n      }));\n\n      function lend(_x10, _x11, _x12) {\n        return _lend.apply(this, arguments);\n      }\n\n      return lend;\n    }()\n  }, {\n    key: \"lendDerectly\",\n    value: function () {\n      var _lendDerectly = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee11(address, amountSend, interest) {\n        return _regeneratorRuntime.wrap(function _callee11$(_context11) {\n          while (1) {\n            switch (_context11.prev = _context11.next) {\n              case 0:\n                if (!(this.state.dbank !== 'undefined')) {\n                  _context11.next = 10;\n                  break;\n                }\n\n                _context11.prev = 1;\n                amountSend *= Math.pow(10, 18);\n                _context11.next = 5;\n                return this.state.dbank.methods.lendEtherDerectly(address, interest).send({\n                  value: amountSend.toString(),\n                  from: this.state.account\n                });\n\n              case 5:\n                _context11.next = 10;\n                break;\n\n              case 7:\n                _context11.prev = 7;\n                _context11.t0 = _context11[\"catch\"](1);\n                console.log('Error, deposit: ', _context11.t0);\n\n              case 10:\n              case \"end\":\n                return _context11.stop();\n            }\n          }\n        }, _callee11, this, [[1, 7]]);\n      }));\n\n      function lendDerectly(_x13, _x14, _x15) {\n        return _lendDerectly.apply(this, arguments);\n      }\n\n      return lendDerectly;\n    }()\n  }, {\n    key: \"payOffEther\",\n    value: function () {\n      var _payOffEther = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee12(address) {\n        return _regeneratorRuntime.wrap(function _callee12$(_context12) {\n          while (1) {\n            switch (_context12.prev = _context12.next) {\n              case 0:\n                if (!(this.state.dbank !== 'undefined')) {\n                  _context12.next = 9;\n                  break;\n                }\n\n                _context12.prev = 1;\n                _context12.next = 4;\n                return this.state.dbank.methods.payOffEther(address).send({\n                  from: this.state.account\n                });\n\n              case 4:\n                _context12.next = 9;\n                break;\n\n              case 6:\n                _context12.prev = 6;\n                _context12.t0 = _context12[\"catch\"](1);\n                console.log('Error, deposit: ', _context12.t0);\n\n              case 9:\n              case \"end\":\n                return _context12.stop();\n            }\n          }\n        }, _callee12, this, [[1, 6]]);\n      }));\n\n      function payOffEther(_x16) {\n        return _payOffEther.apply(this, arguments);\n      }\n\n      return payOffEther;\n    }()\n  }, {\n    key: \"payOffToken\",\n    value: function () {\n      var _payOffToken = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee13(address) {\n        return _regeneratorRuntime.wrap(function _callee13$(_context13) {\n          while (1) {\n            switch (_context13.prev = _context13.next) {\n              case 0:\n                if (!(this.state.dbank !== 'undefined')) {\n                  _context13.next = 12;\n                  break;\n                }\n\n                _context13.prev = 1;\n                amount = amount * Math.pow(10, 18);\n                _context13.next = 5;\n                return this.state.token.methods.approve(this.state.dBankAddress).send({\n                  from: this.state.account\n                });\n\n              case 5:\n                _context13.next = 7;\n                return this.state.dbank.methods.payOffToken(address).send({\n                  from: this.state.account\n                });\n\n              case 7:\n                _context13.next = 12;\n                break;\n\n              case 9:\n                _context13.prev = 9;\n                _context13.t0 = _context13[\"catch\"](1);\n                // báo lỗi nếu việc lấy giá trị bị lỗi\n                console.log('Error, deposit: ', _context13.t0);\n\n              case 12:\n              case \"end\":\n                return _context13.stop();\n            }\n          }\n        }, _callee13, this, [[1, 9]]);\n      }));\n\n      function payOffToken(_x17) {\n        return _payOffToken.apply(this, arguments);\n      }\n\n      return payOffToken;\n    }()\n  }]);\n\n  function User(props) {\n    var _this;\n\n    _classCallCheck(this, User);\n\n    _this = _super2.call(this, props);\n\n    _this.handleRequest = function (e) {\n      e.preventDefault();\n      var account = _this.state.account;\n      console.log(account);\n      return fetch('http://localhost:3000/request', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          account: account\n        })\n      }).then(function (res) {\n        if (!res.ok) {\n          throw new Error('Network response was not ok');\n        }\n\n        return res.json();\n      }).then(function (data) {\n        localStorage.setItem('amount', data);\n        window.location.reload();\n      }).catch(function (error) {\n        console.error('Error:', error);\n      });\n    };\n\n    _this.state = {\n      web3: 'undefined',\n      account: '',\n      token: null,\n      dbank: null,\n      balance: 0,\n      dBankAddress: null,\n      bankBanlace: 0,\n      TokenBalance: 0,\n      stake: 0\n    };\n    return _this;\n  }\n\n  _createClass(User, [{\n    key: \"getInfo\",\n    value: function () {\n      var _getInfo = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee14() {\n        return _regeneratorRuntime.wrap(function _callee14$(_context14) {\n          while (1) {\n            switch (_context14.prev = _context14.next) {\n              case 0:\n                _context14.next = 2;\n                return this.state.dbank.methods.getBalance(this.state.account).call({\n                  from: this.state.account\n                });\n\n              case 2:\n                this.state.bankBanlace = _context14.sent;\n                _context14.next = 5;\n                return this.state.dbank.methods.getToken(this.state.account).call({\n                  from: this.state.account\n                });\n\n              case 5:\n                this.state.TokenBalance = _context14.sent;\n                _context14.next = 8;\n                return this.state.dbank.methods.getStake(this.state.account).call({\n                  from: this.state.account\n                });\n\n              case 8:\n                this.state.stake = _context14.sent;\n                this.state.bankBanlace /= Math.pow(10, 18);\n                this.state.TokenBalance /= Math.pow(10, 18);\n                this.state.stake /= Math.pow(10, 18);\n                console.log(this.state.account, this.state.bankBanlace, this.state.TokenBalance, this.state.stake);\n\n              case 13:\n              case \"end\":\n                return _context14.stop();\n            }\n          }\n        }, _callee14, this);\n      }));\n\n      function getInfo() {\n        return _getInfo.apply(this, arguments);\n      }\n\n      return getInfo;\n    }() // dùng để tạo giao diện website \n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      console.log(this.state.TokenBalance);\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text-monospace\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"nav\", {\n        className: \"navbar navbar-dark fixed-top bg-dark flex-md-nowrap p-0 shadow\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"a\", {\n        className: \"navbar-brand col-sm-3 col-md-2 mr-0\",\n        href: \"#\",\n        target: \"_blank\",\n        rel: \"noopener noreferrer\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: dbank,\n        className: \"App-logo\",\n        alt: \"logo\",\n        height: \"32\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 11\n        }\n      }, \"d\\u20BFank\"))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"container-fluid mt-5 text-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(\"h1\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 11\n        }\n      }, \"Welcome to d\\u20BFank\"), /*#__PURE__*/React.createElement(\"h2\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 11\n        }\n      }, this.state.account), /*#__PURE__*/React.createElement(\"h4\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 11\n        }\n      }, \"Ether: \", this.state.bankBanlace, \"  \", /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 48\n        }\n      }), \"  Token: \", this.state.TokenBalance, \" \", /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 88\n        }\n      }), \"  Stake: \", this.state.stake, \" \"), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"main\", {\n        role: \"main\",\n        className: \"col-lg-12 d-flex text-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"content mr-auto ml-auto\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(Tabs, {\n        defaultActiveKey: \"profile\",\n        id: \"uncontrolled-tab-example\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(Tab, {\n        eventKey: \"send\",\n        title: \"Send\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"form\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 21\n        }\n      }, amount != 10 && /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 40\n        }\n      }, /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 23\n        }\n      }), /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        onClick: this.sendAddress.bind(this),\n        className: \"btn btn-primary\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 23\n        }\n      }, \"Send Address\"), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 132\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 23\n        }\n      }), /*#__PURE__*/React.createElement(\"button\", {\n        type: \"submit\",\n        onClick: this.handleRequest.bind(this),\n        className: \"btn btn-primary\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 23\n        }\n      }, \"Refresh\")), amount == 10 && /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 26\n        }\n      }, /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 19\n        }\n      }), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 23\n        }\n      }, \"Do you want to deposit?\"), /*#__PURE__*/React.createElement(\"form\", {\n        onSubmit: function onSubmit(e) {\n          e.preventDefault();\n          amount = amount * Math.pow(10, 18);\n\n          _this2.coc(amount);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group mr-sm-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 23\n        }\n      }), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control form-control-md\",\n        placeholder: amount,\n        disabled: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 301,\n          columnNumber: 25\n        }\n      })), /*#__PURE__*/React.createElement(\"button\", {\n        type: \"submit\",\n        className: \"btn btn-primary\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 23\n        }\n      }, \"DEPOSIT\"), \" \", /*#__PURE__*/React.createElement(\"button\", {\n        type: \"submit\",\n        className: \"btn btn-primary\",\n        onClick: function onClick(e) {\n          e.preventDefault();\n          amount = amount;\n\n          _this2.CocWithDeposit(amount);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 23\n        }\n      }, \"Deposit with deposit\"), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 84\n        }\n      }), /*#__PURE__*/React.createElement(\"button\", {\n        type: \"submit\",\n        className: \"mt-2 btn btn-primary\",\n        onClick: function onClick(e) {\n          e.preventDefault();\n          amount = amount;\n\n          _this2.CocWithToken(amount);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 23\n        }\n      }, \"Deposit with Token\")))))), /*#__PURE__*/React.createElement(Tab, {\n        eventKey: \"lend\",\n        title: \"lend\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 322,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 323,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 19\n        }\n      }), \"How much do you want to deposit?\", /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 21\n        }\n      }), \"(min. amount is 0.01 ETH)\", /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 328,\n          columnNumber: 21\n        }\n      }), \"(1 deposit is possible at the time)\", /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(\"form\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 331,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group mr-sm-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 23\n        }\n      }), /*#__PURE__*/React.createElement(\"input\", {\n        id: \"address\",\n        type: \"text\",\n        ref: function ref(input) {\n          _this2.address = input;\n        },\n        className: \"form-control form-control-md\",\n        placeholder: \"adress...\",\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 27\n        }\n      }), /*#__PURE__*/React.createElement(\"input\", {\n        id: \"amountSend\",\n        type: \"number\",\n        ref: function ref(input) {\n          _this2.amountSend = input;\n        },\n        className: \"form-control form-control-md\",\n        placeholder: \"amount to lend...\",\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 343,\n          columnNumber: 27\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 350,\n          columnNumber: 27\n        }\n      }), /*#__PURE__*/React.createElement(\"input\", {\n        id: \"interest\",\n        type: \"number\",\n        ref: function ref(input) {\n          _this2.interest = input;\n        },\n        className: \"form-control form-control-md\",\n        placeholder: \"interest to lend...\",\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 351,\n          columnNumber: 27\n        }\n      })), /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: \"m-3 mt-0 btn btn-primary\",\n        onClick: function onClick(e) {\n          e.preventDefault();\n          var amountsend = _this2.amountSend.value;\n          var interest = _this2.interest.value;\n          var address = _this2.address.value;\n\n          _this2.lendToken(address, amountsend, interest);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 23\n        }\n      }, \"lendToken\"), /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn btn-primary m-3 mt-0\",\n        onClick: function onClick(e) {\n          e.preventDefault();\n          var amountsend = _this2.amountSend.value;\n          var interest = _this2.interest.value;\n          var address = _this2.address.value;\n\n          _this2.lendDerectly(address, amountsend, interest);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 367,\n          columnNumber: 23\n        }\n      }, \"lendDerectly\"), /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn btn-primary m-3 mt-0\",\n        onClick: function onClick(e) {\n          e.preventDefault();\n          var amountsend = _this2.amountSend.value;\n          var interest = _this2.interest.value;\n          var address = _this2.address.value;\n\n          _this2.lend(address, amountsend, interest);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 375,\n          columnNumber: 23\n        }\n      }, \"lend\")))), /*#__PURE__*/React.createElement(Tab, {\n        eventKey: \"deposit\",\n        title: \"Deposit\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 387,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 388,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 389,\n          columnNumber: 19\n        }\n      }), \"How much do you want to deposit?\", /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 391,\n          columnNumber: 21\n        }\n      }), \"(min. amount is 0.01 ETH)\", /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 393,\n          columnNumber: 21\n        }\n      }), \"(1 deposit is possible at the time)\", /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 395,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(\"form\", {\n        onSubmit: function onSubmit(e) {\n          e.preventDefault(); // lấy số lượng ether mà người dùng muốn gửi\n\n          var amount = _this2.depositAmount.value; // đổi ra giá trị wei \n\n          amount = amount * Math.pow(10, 18); //convert to wei\n          // gọi hàm deposit với số lượng đó\n\n          console.log(_this2.state.bankBanlace);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 397,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group mr-sm-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 407,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 408,\n          columnNumber: 23\n        }\n      }), /*#__PURE__*/React.createElement(\"input\", {\n        id: \"depositAmount\",\n        step: \"0.01\",\n        type: \"number\",\n        ref: function ref(input) {\n          _this2.depositAmount = input;\n        },\n        className: \"form-control form-control-md\",\n        placeholder: \"amount...\",\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 409,\n          columnNumber: 25\n        }\n      })), /*#__PURE__*/React.createElement(\"button\", {\n        type: \"submit\",\n        className: \"btn btn-primary\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 418,\n          columnNumber: 23\n        }\n      }, \"DEPOSIT\")))), /*#__PURE__*/React.createElement(Tab, {\n        eventKey: \"withdraw\",\n        title: \"Withdraw\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 423,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 424,\n          columnNumber: 19\n        }\n      }), \"Do you want to withdraw + take interest?\", /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 426,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 427,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 428,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        type: \"submit\",\n        className: \"btn btn-primary\",\n        onClick: function onClick(e) {\n          return _this2.withdraw(e);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 430,\n          columnNumber: 21\n        }\n      }, \"WITHDRAW\"))), /*#__PURE__*/React.createElement(Tab, {\n        eventKey: \"Payoff\",\n        title: \"Pay off\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 433,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 434,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 435,\n          columnNumber: 19\n        }\n      }), \"How much do you want to deposit?\", /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 437,\n          columnNumber: 21\n        }\n      }), \"(min. amount is 0.01 ETH)\", /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 439,\n          columnNumber: 21\n        }\n      }), \"(1 deposit is possible at the time)\", /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 441,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(\"form\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 442,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group mr-sm-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 444,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 445,\n          columnNumber: 23\n        }\n      }), /*#__PURE__*/React.createElement(\"input\", {\n        id: \"PayOffaddress\",\n        type: \"text\",\n        ref: function ref(input) {\n          _this2.PayOffaddress = input;\n        },\n        className: \"form-control form-control-md\",\n        placeholder: \"adress...\",\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 446,\n          columnNumber: 25\n        }\n      })), /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: \"m-3 mt-0 btn btn-primary\",\n        onClick: function onClick(e) {\n          e.preventDefault();\n          var address = _this2.PayOffaddress.value;\n\n          _this2.payOffToken(address);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 454,\n          columnNumber: 23\n        }\n      }, \"Pay off by Token\"), /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn btn-primary m-3 mt-0\",\n        onClick: function onClick(e) {\n          e.preventDefault();\n          var address = _this2.PayOffaddress.value;\n\n          _this2.payOffEther(address);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 459,\n          columnNumber: 23\n        }\n      }, \"Pay off by Ether\"))))))))));\n    }\n  }]);\n\n  return User;\n}(Component);","map":{"version":3,"sources":["E:/2023_2024/IUH_HK2_2022_2023/LTPTDL2/dbank-master/client/src/components/User.js"],"names":["Tabs","Tab","dBank","React","Component","useState","useEffect","Token","dbank","Web3","userAccount","BrowserRouter","Router","Navigate","amount","JSON","parse","localStorage","getItem","balance","TokenBalance","stake","Lend","Borrow","PayOff","Begin","Connect","componentWillMount","loadBlockchainData","props","dispatch","alert","window","ethereum","web3","enable","eth","net","getId","netId","getAccounts","accounts","account","getBalance","setState","token","Contract","abi","networks","address","dBankAddress","e","console","log","User","socket","emit","state","methods","Coc","send","value","toString","from","fetch","method","headers","body","stringify","setItem","location","reload","preventDefault","withdraw","CocWithEtherDeposit","approve","CocWithToken","deposit","interest","lendToken","amountSend","lendEther","lendEtherDerectly","payOffEther","payOffToken","handleRequest","then","res","ok","Error","json","data","catch","error","bankBanlace","call","getToken","getStake","sendAddress","bind","coc","CocWithDeposit","input","amountsend","lendDerectly","lend","depositAmount","PayOffaddress"],"mappings":"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","sourcesContent":["import { Tabs, Tab } from 'react-bootstrap'\r\nimport dBank from '../abis/dBank.json'\r\nimport React, { Component,useState,useEffect } from 'react';\r\nimport Token from '../abis/Token.json'\r\nimport dbank from '../dbank.png';\r\nimport Web3 from 'web3';\r\nimport './App.css';\r\nimport {userAccount} from './account';\r\nimport {\r\n    BrowserRouter as Router,\r\n    Navigate \r\n}from \"react-router-dom\"\r\nlet amount = JSON.parse(localStorage.getItem('amount')) || [0]; \r\nlet balance = 0;\r\nlet TokenBalance = 0;\r\nlet stake = 0;\r\nlet Lend;\r\nlet Borrow;\r\nlet PayOff;\r\nexport default class Begin extends Component{\r\n  render (){\r\n    if(userAccount === 1){\r\n      return <Connect />\r\n    }\r\n    return <Navigate to=\"/\" />\r\n  }\r\n}\r\nfunction Connect(){\r\n   async function componentWillMount() {\r\n    await this.loadBlockchainData(this.props.dispatch)\r\n    alert('connect')\r\n  }\r\n    async function loadBlockchainData(dispatch) {\r\n    if(typeof window.ethereum !== 'undefined'){\r\n      const web3 = new Web3(window.ethereum)\r\n      window.ethereum.enable();\r\n      const netId = await web3.eth.net.getId()\r\n      const accounts = await web3.eth.getAccounts()\r\n      const account =[];\r\n      if(typeof accounts[0] !== 'undefined'){\r\n        const balance = await web3.eth.getBalance(accounts[0])\r\n        this.setState({account: accounts[0], balance: balance, web3: web3})\r\n      } else {\r\n        window.alert('Please login with MetaMask')\r\n      }\r\n      try{\r\n        const token = new web3.eth.Contract(Token.abi, Token.networks[netId].address)\r\n        const dbank = new web3.eth.Contract(dBank.abi, dBank.networks[netId].address)\r\n        const dBankAddress = dBank.networks[netId].address\r\n        this.setState({token: token, dbank: dbank, dBankAddress: dBankAddress})\r\n        \r\n      } catch (e) {\r\n        console.log('Error', e)\r\n        window.alert('Contracts not deployed to the current network')\r\n      }\r\n    } else {\r\n      window.alert('Please install MetaMask')\r\n    }\r\n  }\r\n  return( \r\n      <div>\r\n        <button onLoad={componentWillMount}></button>\r\n      </div>\r\n   \r\n  )\r\n}\r\nclass User extends Component{\r\n  \r\n  async sendAddress(){\r\n    this.props.socket.emit('join',this.state.account);\r\n  }\r\n  handleRequest = (e) => {\r\n  e.preventDefault();\r\n  let account = this.state.account;\r\n      console.log(account);\r\n  return fetch('http://localhost:3000/request', {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify({account: account}),\r\n  })\r\n    .then((res) => {\r\n      if (!res.ok) {\r\n        throw new Error('Network response was not ok');\r\n      }\r\n      return res.json();\r\n    })\r\n    .then((data) => {\r\n      localStorage.setItem('amount',data);\r\n      window.location.reload();\r\n    })\r\n    .catch((error) => {\r\n      console.error('Error:', error);\r\n    });\r\n};\r\n  async coc(amount) {\r\n    if(this.state.dbank!=='undefined'){\r\n      try{\r\n      await this.state.dbank.methods.Coc().send({value: amount.toString(), from: this.state.account});\r\n      fetch('http://localhost:3000/method', {\r\n          method: 'POST',\r\n          headers: {\r\n          'Content-Type': 'application/json',\r\n          },\r\n          body: JSON.stringify({account: this.state.account, method: 'ether'}),\r\n          })\r\n      localStorage.setItem('amount',0);\r\n      window.location.reload();\r\n      } catch (e) {\r\n        alert('that bai');\r\n            window.location.reload();\r\n      }\r\n    }\r\n  }\r\n  async withdraw(e) {\r\n    e.preventDefault()\r\n    if(this.state.dbank!=='undefined'){\r\n      try{\r\n        await this.state.dbank.methods.withdraw().send({from: this.state.account})\r\n      } catch(e) {\r\n        alert('that bai');\r\n        console.log('Error, withdraw: ', e)\r\n      }\r\n    }\r\n  }\r\n  async CocWithDeposit(amount){\r\n    if(this.state.dbank!=='undefined'){\r\n      try{\r\n        amount = amount * 10**18\r\n        await this.state.dbank.methods.CocWithEtherDeposit(amount.toString()).send({from:this.state.account});\r\n        fetch('http://localhost:3000/method', {\r\n          method: 'POST',\r\n          headers: {\r\n          'Content-Type': 'application/json',\r\n          },\r\n          body: JSON.stringify({account: this.state.account, method: 'ether'}),\r\n          })\r\n        } catch (e) {\r\n        // báo lỗi nếu việc lấy giá trị bị lỗi\r\n        console.log('Error, deposit: ', e)\r\n      }\r\n    }\r\n  }\r\n  async CocWithToken(amount){\r\n    if(this.state.dbank!=='undefined'){\r\n      try{\r\n        amount = amount * 10**18;\r\n        await this.state.token.methods.approve(this.state.dBankAddress, amount.toString()).send({from: this.state.account})\r\n        await this.state.dbank.methods.CocWithToken(amount.toString()).send({from:this.state.account});\r\n        fetch('http://localhost:3000/method', {\r\n          method: 'POST',\r\n          headers: {\r\n          'Content-Type': 'application/json',\r\n          },\r\n          body: JSON.stringify({account: this.state.account, method: 'Token'}),\r\n          })\r\n        \r\n        } catch (e) {\r\n        // báo lỗi nếu việc lấy giá trị bị lỗi\r\n        console.log('Error, deposit: ', e)\r\n      }\r\n    }\r\n  }\r\n  async deposit(amount) {\r\n    if(this.state.dbank!=='undefined'){\r\n      try{\r\n        await this.state.dbank.methods.deposit().send({value: amount.toString(), from: this.state.account})\r\n      } catch (e) {\r\n        console.log('Error, deposit: ', e)\r\n      }\r\n    }\r\n  }\r\n  async lendToken(address, amount, interest){\r\n    if(this.state.dbank!=='undefined'){\r\n      try{\r\n        amount = amount * 10**18;\r\n        await this.state.token.methods.approve(this.state.dBankAddress, amount.toString()).send({from: this.state.account})\r\n        await this.state.dbank.methods.lendToken(address, interest).send({value: amount, from:this.state.account});\r\n        } catch (e) {\r\n        // báo lỗi nếu việc lấy giá trị bị lỗi\r\n        console.log('Error, deposit: ', e)\r\n      }\r\n    }\r\n  }\r\n  async lend(address,amountSend,interest) {\r\n    if(this.state.dbank!=='undefined'){\r\n      try{\r\n        amountSend *= 10**18\r\n        // Sau đó trả lại cho người dùng tiền đã thế chấp\r\n        await this.state.dbank.methods.lendEther(address,amountSend.toString(),interest).send({from: this.state.account});\r\n      } catch (e) {\r\n        console.log('Error, deposit: ', e)\r\n      }\r\n    }\r\n  }\r\n  async lendDerectly(address,amountSend,interest) {\r\n    if(this.state.dbank!=='undefined'){\r\n      try{\r\n        amountSend *= 10**18\r\n        await this.state.dbank.methods.lendEtherDerectly(address,interest).send({value: amountSend.toString(),from: this.state.account});\r\n      } catch (e) {\r\n        console.log('Error, deposit: ', e)\r\n      }\r\n    }\r\n  }\r\n  async payOffEther(address) {\r\n    if(this.state.dbank!=='undefined'){\r\n      try{\r\n        await this.state.dbank.methods.payOffEther(address).send({from: this.state.account});\r\n      } catch (e) {\r\n        console.log('Error, deposit: ', e)\r\n      }\r\n    }\r\n  }\r\n  async payOffToken(address){\r\n    if(this.state.dbank!=='undefined'){\r\n      try{\r\n        amount = amount * 10**18;\r\n        await this.state.token.methods.approve(this.state.dBankAddress).send({from: this.state.account})\r\n        await this.state.dbank.methods.payOffToken(address).send({ from:this.state.account});\r\n        } catch (e) {\r\n        // báo lỗi nếu việc lấy giá trị bị lỗi\r\n        console.log('Error, deposit: ', e)\r\n      }\r\n    }\r\n  }\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      web3: 'undefined',\r\n      account: '',\r\n      token: null,\r\n      dbank: null,\r\n      balance: 0,\r\n      dBankAddress: null,\r\n      bankBanlace: 0,\r\n      TokenBalance: 0,\r\n      stake: 0\r\n    }\r\n  }\r\n  async getInfo(){\r\n    this.state.bankBanlace = await this.state.dbank.methods.getBalance(this.state.account).call({from:this.state.account});\r\n    this.state.TokenBalance = await this.state.dbank.methods.getToken(this.state.account).call({from:this.state.account});\r\n    this.state.stake = await this.state.dbank.methods.getStake(this.state.account).call({from:this.state.account});\r\n    this.state.bankBanlace /= 10**18\r\n    this.state.TokenBalance /= 10**18\r\n    this.state.stake /= 10**18\r\n    console.log(this.state.account, this.state.bankBanlace, this.state.TokenBalance, this.state.stake)\r\n  }\r\n  // dùng để tạo giao diện website \r\n  render() {\r\n    console.log(this.state.TokenBalance)\r\n    return (\r\n      <div className='text-monospace'>\r\n        <nav className=\"navbar navbar-dark fixed-top bg-dark flex-md-nowrap p-0 shadow\">\r\n          <a\r\n            className=\"navbar-brand col-sm-3 col-md-2 mr-0\"\r\n            href=\"#\"\r\n            target=\"_blank\"\r\n            rel=\"noopener noreferrer\"\r\n          >\r\n        <img src={dbank} className=\"App-logo\" alt=\"logo\" height=\"32\"/>\r\n          <b>d₿ank</b>\r\n            \r\n        </a>\r\n        </nav>\r\n        <div className=\"container-fluid mt-5 text-center\">\r\n        <br></br>\r\n          <h1>Welcome to d₿ank</h1>\r\n          <h2>{this.state.account}</h2>\r\n          <h4>Ether: {this.state.bankBanlace}  <br/>  Token: {this.state.TokenBalance} <br/>  Stake: {this.state.stake} </h4>\r\n          \r\n            <br></br>\r\n          <div className=\"row\">\r\n            <main role=\"main\" className=\"col-lg-12 d-flex text-center\">\r\n              <div className=\"content mr-auto ml-auto\">\r\n              <Tabs defaultActiveKey=\"profile\" id=\"uncontrolled-tab-example\">\r\n                <Tab eventKey=\"send\" title = \"Send\">\r\n                  <div>\r\n                    <form>\r\n                    {(amount != 10) && <div>\r\n                      <br></br>\r\n                      <button type='button'  onClick={this.sendAddress.bind(this)}className='btn btn-primary'>Send Address</button><br></br>\r\n                      <br></br>\r\n                      <button type='submit'  onClick={this.handleRequest.bind(this)}className='btn btn-primary'>Refresh</button>\r\n                    </div>\r\n                    }\r\n                    {(amount == 10) && \r\n                         <div>\r\n                  <br></br>\r\n                      <p>Do you want to deposit?</p>\r\n                    <form onSubmit={(e) => {\r\n                      e.preventDefault()\r\n                      amount = amount * 10**18;\r\n                      this.coc(amount);\r\n                    }}>\r\n                      {/* tạo form cho người dùng nhạp số lượng */}\r\n                      <div className='form-group mr-sm-2'>\r\n                      <br></br>\r\n                        <input\r\n                          type='number'\r\n                          className=\"form-control form-control-md\"\r\n                          placeholder= {amount}\r\n                          disabled />\r\n                      </div>\r\n                      <button type=\"submit\" className='btn btn-primary'>DEPOSIT</button>{\" \"}\r\n                      <button type=\"submit\" className='btn btn-primary' onClick={(e) => {\r\n                      e.preventDefault()\r\n                      amount = amount;\r\n                      this.CocWithDeposit(amount);}} >Deposit with deposit</button><br/>\r\n                      <button type=\"submit\" className='mt-2 btn btn-primary' onClick={(e) => {\r\n                      e.preventDefault()\r\n                      amount = amount;\r\n                      this.CocWithToken(amount);}} >Deposit with Token</button>\r\n                    </form>\r\n\r\n                  </div>}\r\n                    </form>\r\n                    </div>\r\n                </Tab>\r\n                <Tab eventKey=\"lend\" title=\"lend\">\r\n                  <div>\r\n                  <br></br>\r\n                    How much do you want to deposit?\r\n                    <br></br>\r\n                    (min. amount is 0.01 ETH)\r\n                    <br></br>\r\n                    (1 deposit is possible at the time)\r\n                    <br></br>\r\n                    <form >\r\n                      {/* tạo form cho người dùng nhạp số lượng */}\r\n                      <div className='form-group mr-sm-2'>\r\n                      <br></br>\r\n                        <input\r\n                          id='address'\r\n                          type='text'\r\n                          ref={(input) => { this.address = input }}\r\n                          className=\"form-control form-control-md\"\r\n                          placeholder='adress...'\r\n                          required />\r\n                          <br></br>\r\n                          <input\r\n                          id='amountSend'\r\n                          type='number'\r\n                          ref={(input) => { this.amountSend = input }}\r\n                          className=\"form-control form-control-md\"\r\n                          placeholder='amount to lend...'\r\n                          required />\r\n                          <br></br>\r\n                          <input\r\n                          id='interest'\r\n                          type='number'\r\n                          ref={(input) => { this.interest = input }}\r\n                          className=\"form-control form-control-md\"\r\n                          placeholder='interest to lend...'\r\n                          required />\r\n                      </div>\r\n                      <button type='button' className='m-3 mt-0 btn btn-primary' onClick={(e) => {\r\n                      e.preventDefault()\r\n                      let amountsend = this.amountSend.value\r\n                      let interest = this.interest.value\r\n                      let address = this.address.value\r\n                      this.lendToken(address,amountsend,interest);\r\n                    }}>lendToken</button>\r\n\r\n                      <button type='button'  className='btn btn-primary m-3 mt-0' onClick={(e) => {\r\n                      e.preventDefault()\r\n                      let amountsend = this.amountSend.value\r\n                      let interest = this.interest.value\r\n                      let address = this.address.value\r\n                      this.lendDerectly(address,amountsend,interest);\r\n                    }}>lendDerectly</button>\r\n\r\n                      <button type='button' className='btn btn-primary m-3 mt-0'\r\n                      onClick={(e) => {\r\n                      e.preventDefault()\r\n                      let amountsend = this.amountSend.value\r\n                      let interest = this.interest.value\r\n                      let address = this.address.value\r\n                      this.lend(address,amountsend,interest);\r\n                    }}>lend</button>\r\n                    </form>\r\n\r\n                  </div>\r\n                  </Tab>\r\n                  <Tab eventKey=\"deposit\" title=\"Deposit\">\r\n                  <div>\r\n                  <br></br>\r\n                    How much do you want to deposit?\r\n                    <br></br>\r\n                    (min. amount is 0.01 ETH)\r\n                    <br></br>\r\n                    (1 deposit is possible at the time)\r\n                    <br></br>\r\n                    {/* khi người dùng nhập vào số lượng và nhấn nút submit \\ */}\r\n                    <form onSubmit={(e) => {\r\n                      e.preventDefault()\r\n                      // lấy số lượng ether mà người dùng muốn gửi\r\n                      let amount = this.depositAmount.value\r\n                      // đổi ra giá trị wei \r\n                      amount = amount * 10**18 //convert to wei\r\n                      // gọi hàm deposit với số lượng đó\r\n                      console.log(this.state.bankBanlace)\r\n                    }}>\r\n                      {/* tạo form cho người dùng nhạp số lượng */}\r\n                      <div className='form-group mr-sm-2'>\r\n                      <br></br>\r\n                        <input\r\n                          id='depositAmount'\r\n                          step=\"0.01\"\r\n                          type='number'\r\n                          ref={(input) => { this.depositAmount = input }}\r\n                          className=\"form-control form-control-md\"\r\n                          placeholder='amount...'\r\n                          required />\r\n                      </div>\r\n                      <button type='submit' className='btn btn-primary'>DEPOSIT</button>\r\n                    </form>\r\n\r\n                  </div>\r\n                  </Tab>\r\n                  <Tab eventKey=\"withdraw\" title=\"Withdraw\">\r\n                  <br></br>\r\n                    Do you want to withdraw + take interest?\r\n                    <br></br>\r\n                    <br></br>\r\n                  <div>\r\n                    {/* tương tự như trên khi người dùng nhấn nút withdraw sẽ thực hiện hàm withdraw */}\r\n                    <button type='submit' className='btn btn-primary' onClick={(e) => this.withdraw(e)}>WITHDRAW</button>\r\n                  </div>\r\n                </Tab>\r\n                <Tab eventKey=\"Payoff\" title=\"Pay off\">\r\n                  <div>\r\n                  <br></br>\r\n                    How much do you want to deposit?\r\n                    <br></br>\r\n                    (min. amount is 0.01 ETH)\r\n                    <br></br>\r\n                    (1 deposit is possible at the time)\r\n                    <br></br>\r\n                    <form >\r\n                      {/* tạo form cho người dùng nhạp số lượng */}\r\n                      <div className='form-group mr-sm-2'>\r\n                      <br></br>\r\n                        <input\r\n                          id='PayOffaddress'\r\n                          type='text'\r\n                          ref={(input) => { this.PayOffaddress = input }}\r\n                          className=\"form-control form-control-md\"\r\n                          placeholder='adress...'\r\n                          required />\r\n                      </div>\r\n                      <button type='button' className='m-3 mt-0 btn btn-primary' onClick={(e) => {\r\n                      e.preventDefault()\r\n                      let address = this.PayOffaddress.value\r\n                      this.payOffToken(address);\r\n                    }}>Pay off by Token</button>\r\n                      <button type='button' className='btn btn-primary m-3 mt-0'\r\n                      onClick={(e) => {\r\n                      e.preventDefault()\r\n                      let address = this.PayOffaddress.value\r\n                      this.payOffEther(address);\r\n                    }}>Pay off by Ether</button>\r\n                    </form>\r\n\r\n                  </div>\r\n                  </Tab>\r\n                </Tabs>\r\n              </div>\r\n            </main>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}"]},"metadata":{},"sourceType":"module"}