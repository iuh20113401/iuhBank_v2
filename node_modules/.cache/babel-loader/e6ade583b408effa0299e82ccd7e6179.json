{"ast":null,"code":"import _regeneratorRuntime from\"E:\\\\2023_2024\\\\IUH_HK2_2022_2023\\\\LTPTDL2\\\\dbank-master\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"E:\\\\2023_2024\\\\IUH_HK2_2022_2023\\\\LTPTDL2\\\\dbank-master\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"E:\\\\2023_2024\\\\IUH_HK2_2022_2023\\\\LTPTDL2\\\\dbank-master\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\2023_2024\\\\IUH_HK2_2022_2023\\\\LTPTDL2\\\\dbank-master\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"E:\\\\2023_2024\\\\IUH_HK2_2022_2023\\\\LTPTDL2\\\\dbank-master\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\2023_2024\\\\IUH_HK2_2022_2023\\\\LTPTDL2\\\\dbank-master\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import _slicedToArray from\"E:\\\\2023_2024\\\\IUH_HK2_2022_2023\\\\LTPTDL2\\\\dbank-master\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import{Tabs,Tab}from'react-bootstrap';import dBank from'../abis/dBank.json';import React,{Component,useState}from'react';import Token from'../abis/Token.json';import dbank from'../iuh.png';import Modal from'react-bootstrap/Modal';import Button from'react-bootstrap/Button';import Web3 from'web3';import{userAccount}from'./account';import{BrowserRouter as Router,Navigate}from\"react-router-dom\";var amount=JSON.parse(localStorage.getItem('amount'))||[0];var modal=localStorage.getItem('modal')||'';var lender=[{account:'',value:0,method:'',payOffAmount:0}];function ModalShow(props){var _useState=useState(true),_useState2=_slicedToArray(_useState,2),show=_useState2[0],setShow=_useState2[1];var handleClose=function handleClose(){return setShow(false);};var Reload=function Reload(){setShow(false);};var message=props.message;localStorage.removeItem(\"modal\");return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Modal,{show:show,onHide:handleClose},/*#__PURE__*/React.createElement(Modal.Header,null,/*#__PURE__*/React.createElement(Modal.Title,{className:\"m-auto\"},message)),/*#__PURE__*/React.createElement(Modal.Footer,null,/*#__PURE__*/React.createElement(Button,{variant:\"primary\",onClick:Reload},\"Close\"))));}var Begin=/*#__PURE__*/function(_React$Component){_inherits(Begin,_React$Component);var _super=_createSuper(Begin);function Begin(){_classCallCheck(this,Begin);return _super.apply(this,arguments);}_createClass(Begin,[{key:\"render\",value:function render(){console.log(userAccount);if(userAccount==1){return/*#__PURE__*/React.createElement(User,{socket:this.props.socket});}return/*#__PURE__*/React.createElement(Navigate,{to:\"/\"});}}]);return Begin;}(React.Component);export{Begin as default};var User=/*#__PURE__*/function(_Component){_inherits(User,_Component);var _super2=_createSuper(User);_createClass(User,[{key:\"loadBlockchainData\",value:function(){var _loadBlockchainData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var web3,netId,accounts,balance,token,_dbank,dBankAddress;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(typeof window.ethereum!=='undefined')){_context.next=19;break;}web3=new Web3(window.ethereum);_context.next=4;return web3.eth.net.getId();case 4:netId=_context.sent;_context.next=7;return web3.eth.getAccounts();case 7:accounts=_context.sent;_context.next=10;return web3.eth.getBalance(accounts[0]);case 10:balance=_context.sent;this.setState({account:accounts[0],balance:balance,web3:web3});token=new web3.eth.Contract(Token.abi,Token.networks[netId].address);_dbank=new web3.eth.Contract(dBank.abi,dBank.networks[netId].address);dBankAddress=dBank.networks[netId].address;this.setState({token:token,dbank:_dbank,dBankAddress:dBankAddress});_context.next=18;return this.getInfo();case 18:// Sử dụng await để đợi cho hàm getInfo hoàn thành\nthis.setState({connect:true});// Sau đó mới gán giá trị true cho biến connect\ncase 19:case\"end\":return _context.stop();}}},_callee,this);}));function loadBlockchainData(_x){return _loadBlockchainData.apply(this,arguments);}return loadBlockchainData;}()},{key:\"getInfo\",value:function(){var _getInfo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var lenderAmount,index;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return this.state.dbank.methods.getBalance(this.state.account).call({from:this.state.account});case 2:_context2.t0=_context2.sent;_context2.t1=Math.pow(10,18);this.state.bankBanlace=_context2.t0/_context2.t1;_context2.next=7;return this.state.dbank.methods.getToken(this.state.account).call({from:this.state.account});case 7:_context2.t2=_context2.sent;_context2.t3=Math.pow(10,18);this.state.TokenBalance=_context2.t2/_context2.t3;_context2.next=12;return this.state.dbank.methods.getStake(this.state.account).call({from:this.state.account});case 12:_context2.t4=_context2.sent;_context2.t5=Math.pow(10,18);this.state.stake=_context2.t4/_context2.t5;_context2.next=17;return this.state.dbank.methods.getLenderAmount().call({from:this.state.account});case 17:lenderAmount=_context2.sent;index=0;case 19:if(!(index<lenderAmount)){_context2.next=50;break;}_context2.next=22;return this.state.dbank.methods.getLender(index).call({from:this.state.account});case 22:_context2.t6=_context2.sent;lender[index]={account:_context2.t6};_context2.next=26;return this.state.dbank.methods.getBorrowMethod(index).call({from:this.state.account});case 26:lender[index].method=_context2.sent;if(!(lender[index].method===\"Ether\")){_context2.next=33;break;}_context2.next=30;return this.state.dbank.methods.getBorrowBalanceOf(lender[index].account).call({from:this.state.account});case 30:_context2.t7=_context2.sent;_context2.next=36;break;case 33:_context2.next=35;return this.state.dbank.methods.getTokenBorrow(lender[index].account).call({from:this.state.account});case 35:_context2.t7=_context2.sent;case 36:lender[index].value=_context2.t7;if(!(lender[index].method==\"Ether\")){_context2.next=43;break;}_context2.next=40;return this.state.dbank.methods.getPayOffAmountEther(lender[index].account).call({from:this.state.account});case 40:_context2.t8=_context2.sent;_context2.next=46;break;case 43:_context2.next=45;return this.state.dbank.methods.getPayOffAmountToken(lender[index].account).call({from:this.state.account});case 45:_context2.t8=_context2.sent;case 46:lender[index].payOffAmount=_context2.t8;case 47:index++;_context2.next=19;break;case 50:case\"end\":return _context2.stop();}}},_callee2,this);}));function getInfo(){return _getInfo.apply(this,arguments);}return getInfo;}()},{key:\"sendAddress\",value:function(){var _sendAddress=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:this.props.socket.emit('join',this.state.account);localStorage.setItem('modal',\"Send request successfully\");window.location.reload();case 3:case\"end\":return _context3.stop();}}},_callee3,this);}));function sendAddress(){return _sendAddress.apply(this,arguments);}return sendAddress;}()},{key:\"coc\",value:function(){var _coc=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(amount){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(!(this.state.dbank!=='undefined')){_context4.next=14;break;}_context4.prev=1;_context4.next=4;return this.state.dbank.methods.Coc().send({value:amount.toString(),from:this.state.account});case 4:fetch('http://localhost:3000/method',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({account:this.state.account,method:'ether'})});localStorage.setItem('amount',0);localStorage.setItem('modal',\"You stake successfully\");window.location.reload();_context4.next=14;break;case 10:_context4.prev=10;_context4.t0=_context4[\"catch\"](1);localStorage.setItem('modal',\"You stake fail\");window.location.reload();case 14:case\"end\":return _context4.stop();}}},_callee4,this,[[1,10]]);}));function coc(_x2){return _coc.apply(this,arguments);}return coc;}()},{key:\"withdraw\",value:function(){var _withdraw=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(e){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:e.preventDefault();if(!(this.state.dbank!=='undefined')){_context5.next=13;break;}_context5.prev=2;_context5.next=5;return this.state.dbank.methods.withdraw().send({from:this.state.account});case 5:localStorage.setItem('modal',\"You withdraw successfully\");window.location.reload();_context5.next=13;break;case 9:_context5.prev=9;_context5.t0=_context5[\"catch\"](2);localStorage.setItem('modal',\"You withdraw fail\");window.location.reload();case 13:case\"end\":return _context5.stop();}}},_callee5,this,[[2,9]]);}));function withdraw(_x3){return _withdraw.apply(this,arguments);}return withdraw;}()},{key:\"CocWithDeposit\",value:function(){var _CocWithDeposit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(amount){return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:if(!(this.state.dbank!=='undefined')){_context6.next=14;break;}_context6.prev=1;amount=amount*Math.pow(10,18);_context6.next=5;return this.state.dbank.methods.CocWithEtherDeposit(amount.toString()).send({from:this.state.account});case 5:fetch('http://localhost:3000/method',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({account:this.state.account,method:'ether'})});localStorage.setItem('modal',\"You stake successfully\");window.location.reload();_context6.next=14;break;case 10:_context6.prev=10;_context6.t0=_context6[\"catch\"](1);localStorage.setItem('modal',\"You stake fail\");window.location.reload();case 14:case\"end\":return _context6.stop();}}},_callee6,this,[[1,10]]);}));function CocWithDeposit(_x4){return _CocWithDeposit.apply(this,arguments);}return CocWithDeposit;}()},{key:\"CocWithToken\",value:function(){var _CocWithToken=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(amount){return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:if(!(this.state.dbank!=='undefined')){_context7.next=16;break;}_context7.prev=1;amount=amount*Math.pow(10,18);_context7.next=5;return this.state.token.methods.approve(this.state.dBankAddress,amount.toString()).send({from:this.state.account});case 5:_context7.next=7;return this.state.dbank.methods.CocWithToken(amount.toString()).send({from:this.state.account});case 7:fetch('http://localhost:3000/method',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({account:this.state.account,method:'Token'})});localStorage.setItem('modal',\"You stake successfully\");window.location.reload();_context7.next=16;break;case 12:_context7.prev=12;_context7.t0=_context7[\"catch\"](1);localStorage.setItem('modal',\"You stake fail\");window.location.reload();case 16:case\"end\":return _context7.stop();}}},_callee7,this,[[1,12]]);}));function CocWithToken(_x5){return _CocWithToken.apply(this,arguments);}return CocWithToken;}()},{key:\"deposit\",value:function(){var _deposit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(amount){return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:if(!(this.state.dbank!=='undefined')){_context8.next=12;break;}_context8.prev=1;_context8.next=4;return this.state.dbank.methods.deposit().send({value:amount.toString(),from:this.state.account});case 4:localStorage.setItem('modal',\"You deposit successfully\");window.location.reload();_context8.next=12;break;case 8:_context8.prev=8;_context8.t0=_context8[\"catch\"](1);localStorage.setItem('modal',\"You deposit fail\");window.location.reload();case 12:case\"end\":return _context8.stop();}}},_callee8,this,[[1,8]]);}));function deposit(_x6){return _deposit.apply(this,arguments);}return deposit;}()},{key:\"lendToken\",value:function(){var _lendToken=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(address,amount,interest){return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:if(!(this.state.dbank!=='undefined')){_context9.next=15;break;}_context9.prev=1;amount=amount*Math.pow(10,18);_context9.next=5;return this.state.token.methods.approve(this.state.dBankAddress,amount.toString()).send({from:this.state.account});case 5:_context9.next=7;return this.state.dbank.methods.lendToken(address,interest).send({value:amount,from:this.state.account});case 7:localStorage.setItem('modal',\"You lend successfully\");window.location.reload();_context9.next=15;break;case 11:_context9.prev=11;_context9.t0=_context9[\"catch\"](1);// báo lỗi nếu việc lấy giá trị bị lỗi\nlocalStorage.setItem('modal',\"You lend fail\");window.location.reload();case 15:case\"end\":return _context9.stop();}}},_callee9,this,[[1,11]]);}));function lendToken(_x7,_x8,_x9){return _lendToken.apply(this,arguments);}return lendToken;}()},{key:\"lend\",value:function(){var _lend=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(address,amountSend,interest){return _regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:if(!(this.state.dbank!=='undefined')){_context10.next=13;break;}_context10.prev=1;amountSend*=Math.pow(10,18);// Sau đó trả lại cho người dùng tiền đã thế chấp\n_context10.next=5;return this.state.dbank.methods.lendEther(address,amountSend.toString(),interest).send({from:this.state.account});case 5:localStorage.setItem('modal',\"You lend successfully\");window.location.reload();_context10.next=13;break;case 9:_context10.prev=9;_context10.t0=_context10[\"catch\"](1);localStorage.setItem('modal',\"You lend fail\");window.location.reload();case 13:case\"end\":return _context10.stop();}}},_callee10,this,[[1,9]]);}));function lend(_x10,_x11,_x12){return _lend.apply(this,arguments);}return lend;}()},{key:\"lendDerectly\",value:function(){var _lendDerectly=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee11(address,amountSend,interest){return _regeneratorRuntime.wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:if(!(this.state.dbank!=='undefined')){_context11.next=13;break;}_context11.prev=1;amountSend*=Math.pow(10,18);_context11.next=5;return this.state.dbank.methods.lendEtherDerectly(address,interest).send({value:amountSend.toString(),from:this.state.account});case 5:localStorage.setItem('modal',\"You lend successfully\");window.location.reload();_context11.next=13;break;case 9:_context11.prev=9;_context11.t0=_context11[\"catch\"](1);localStorage.setItem('modal',\"You lend fail\");window.location.reload();case 13:case\"end\":return _context11.stop();}}},_callee11,this,[[1,9]]);}));function lendDerectly(_x13,_x14,_x15){return _lendDerectly.apply(this,arguments);}return lendDerectly;}()},{key:\"payOffEther\",value:function(){var _payOffEther=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee12(address,amount){return _regeneratorRuntime.wrap(function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:if(!(this.state.dbank!=='undefined')){_context12.next=12;break;}_context12.prev=1;_context12.next=4;return this.state.dbank.methods.payOffEther(address,amount).send({value:amount,from:this.state.account});case 4:localStorage.setItem('modal',\"You PayOFf successfully\");window.location.reload();_context12.next=12;break;case 8:_context12.prev=8;_context12.t0=_context12[\"catch\"](1);localStorage.setItem('modal',\"You PayOff fail\");window.location.reload();case 12:case\"end\":return _context12.stop();}}},_callee12,this,[[1,8]]);}));function payOffEther(_x16,_x17){return _payOffEther.apply(this,arguments);}return payOffEther;}()},{key:\"payOffToken\",value:function(){var _payOffToken=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee13(address,amount){return _regeneratorRuntime.wrap(function _callee13$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:if(!(this.state.dbank!=='undefined')){_context13.next=14;break;}_context13.prev=1;_context13.next=4;return this.state.token.methods.approve(this.state.dBankAddress,amount).send({from:this.state.account});case 4:_context13.next=6;return this.state.dbank.methods.payOffToken(address).send({from:this.state.account});case 6:localStorage.setItem('modal',\"You PayOFf successfully\");window.location.reload();_context13.next=14;break;case 10:_context13.prev=10;_context13.t0=_context13[\"catch\"](1);localStorage.setItem('modal',\"You PayOff fail\");window.location.reload();case 14:case\"end\":return _context13.stop();}}},_callee13,this,[[1,10]]);}));function payOffToken(_x18,_x19){return _payOffToken.apply(this,arguments);}return payOffToken;}()}]);function User(props){var _this;_classCallCheck(this,User);_this=_super2.call(this,props);_this.handleRequest=function(e){e.preventDefault();var account=_this.state.account;return fetch('http://localhost:3000/request',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({account:account})}).then(function(res){if(!res.ok){throw new Error('Network response was not ok');}return res.json();}).then(function(data){localStorage.setItem('amount',data);localStorage.setItem('modal',\"You have a request to stake\");window.location.reload();}).catch(function(error){window.location.reload();});};_this.state={web3:'undefined',account:'',token:null,dbank:null,balance:0,dBankAddress:null,bankBanlace:0,TokenBalance:0,stake:0,connect:false};return _this;}// dùng để tạo giao diện website \n_createClass(User,[{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/React.createElement(\"div\",null,modal!==''&&/*#__PURE__*/React.createElement(ModalShow,{message:modal}),/*#__PURE__*/React.createElement(\"div\",{className:\"text-monospace\"},this.state.connect===false&&/*#__PURE__*/React.createElement(\"div\",{onLoad:this.loadBlockchainData(this.props.dispatch)}),this.state.connect===true&&/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"nav\",{className:\"navbar navbar-primary fixed-top bg-primary flex-md-nowrap p-0 shadow\"},/*#__PURE__*/React.createElement(\"a\",{className:\"navbar-brand col-sm-3 col-md-2 mr-0\",href:\"#\",target:\"_blank\",rel:\"noopener noreferrer\"},/*#__PURE__*/React.createElement(\"img\",{src:dbank,className:\"App-logo m-auto \",alt:\"logo\",height:\"32\"}),/*#__PURE__*/React.createElement(\"b\",{className:\"text-dark\"},\"IUHBANK\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"container-fluid mt-5 text-center\"},/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"h1\",null,\"Welcome to d\\u20BFank\"),/*#__PURE__*/React.createElement(\"h4\",null,\"Your accoutn have : Ether: \",this.state.bankBanlace,\", Token: \",this.state.TokenBalance,\",  Stake: \",this.state.stake,\" \"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"main\",{role:\"main\",className:\"col-lg-12 d-flex text-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"content mr-auto ml-auto\"},/*#__PURE__*/React.createElement(Tabs,{defaultActiveKey:\"profile\",id:\"uncontrolled-tab-example\"},/*#__PURE__*/React.createElement(Tab,{eventKey:\"send\",title:\"Send\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"form\",null,amount==0&&/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",onClick:this.sendAddress.bind(this),className:\"btn btn-primary\"},\"Send Address\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",onClick:this.handleRequest.bind(this),className:\"btn btn-primary\"},\"Refresh\")),amount!=0&&/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"p\",null,\"Do you want to deposit?\"),/*#__PURE__*/React.createElement(\"form\",{onSubmit:function onSubmit(e){e.preventDefault();amount=amount*Math.pow(10,18);_this2.coc(amount);}},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group mr-sm-2\"},/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{type:\"number\",className:\"form-control form-control-md\",placeholder:amount,disabled:true})),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn btn-primary\"},\"DEPOSIT\"),\" \",/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn btn-primary\",onClick:function onClick(e){e.preventDefault();amount=amount;_this2.CocWithDeposit(amount);}},\"Deposit with deposit\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"mt-2 btn btn-primary\",onClick:function onClick(e){e.preventDefault();amount=amount;_this2.CocWithToken(amount);}},\"Deposit with Token\")))))),/*#__PURE__*/React.createElement(Tab,{eventKey:\"lend\",title:\"lend\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"br\",null),\"How much do you want to deposit?\",/*#__PURE__*/React.createElement(\"br\",null),\"(min. amount is 0.01 ETH)\",/*#__PURE__*/React.createElement(\"br\",null),\"(1 deposit is possible at the time)\",/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"form\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"form-group mr-sm-2\"},/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{id:\"address\",type:\"text\",ref:function ref(input){_this2.address=input;},className:\"form-control form-control-md\",placeholder:\"adress...\",required:true}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{id:\"amountSend\",type:\"number\",ref:function ref(input){_this2.amountSend=input;},className:\"form-control form-control-md\",placeholder:\"amount to lend...\",required:true}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{id:\"interest\",type:\"number\",ref:function ref(input){_this2.interest=input;},className:\"form-control form-control-md\",placeholder:\"interest to lend...\",required:true})),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"m-3 mt-0 btn btn-primary\",onClick:function onClick(e){e.preventDefault();var amountsend=_this2.amountSend.value;var interest=_this2.interest.value;var address=_this2.address.value;_this2.lendToken(address,amountsend,interest);}},\"lendToken\"),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"btn btn-primary m-3 mt-0\",onClick:function onClick(e){e.preventDefault();var amountsend=_this2.amountSend.value;var interest=_this2.interest.value;var address=_this2.address.value;_this2.lendDerectly(address,amountsend,interest);}},\"lendDerectly\"),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"btn btn-primary m-3 mt-0\",onClick:function onClick(e){e.preventDefault();var amountsend=_this2.amountSend.value;var interest=_this2.interest.value;var address=_this2.address.value;_this2.lend(address,amountsend,interest);}},\"lend\")))),/*#__PURE__*/React.createElement(Tab,{eventKey:\"deposit\",title:\"Deposit\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"br\",null),\"How much do you want to deposit?\",/*#__PURE__*/React.createElement(\"br\",null),\"(min. amount is 0.01 ETH)\",/*#__PURE__*/React.createElement(\"br\",null),\"(1 deposit is possible at the time)\",/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"form\",{onSubmit:function onSubmit(e){e.preventDefault();var amount=_this2.depositAmount.value;amount=amount*Math.pow(10,18);//convert to wei\n_this2.deposit(amount);}},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group mr-sm-2\"},/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{id:\"depositAmount\",step:\"0.01\",type:\"number\",ref:function ref(input){_this2.depositAmount=input;},className:\"form-control form-control-md\",placeholder:\"amount...\",required:true})),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn btn-primary\"},\"DEPOSIT\")))),/*#__PURE__*/React.createElement(Tab,{eventKey:\"withdraw\",title:\"Withdraw\"},/*#__PURE__*/React.createElement(\"br\",null),\"Do you want to withdraw + take interest?\",/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn btn-primary\",onClick:function onClick(e){return _this2.withdraw(e);}},\"WITHDRAW\"))),/*#__PURE__*/React.createElement(Tab,{eventKey:\"Payoff\",title:\"Pay off\"},lender!=[]&&lender.map(function(lendercon){return lendercon.value!=0&&/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"form\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"form-group mr-sm-2\"},/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"form-control form-control-md\",placeholder:lendercon.account,disabled:true}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{type:\"number\",className:\"form-control form-control-md\",placeholder:lendercon.value,disabled:true}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"form-control form-control-md\",placeholder:lendercon.method,disabled:true}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"form-control form-control-md\",placeholder:lendercon.payOffAmount,disabled:true})),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"m-3 mt-0 btn btn-primary\",onClick:function onClick(e){e.preventDefault();_this2.payOffToken(lendercon.account,lendercon.payOffAmount);}},\"Pay off by Token\"),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"btn btn-primary m-3 mt-0\",onClick:function onClick(e){e.preventDefault();_this2.payOffEther(lendercon.account,lendercon.payOffAmount);}},\"Pay off by Ether\")));}))))))))));}}]);return User;}(Component);","map":{"version":3,"sources":["E:/2023_2024/IUH_HK2_2022_2023/LTPTDL2/dbank-master/client/src/components/User.js"],"names":["Tabs","Tab","dBank","React","Component","useState","Token","dbank","Modal","Button","Web3","userAccount","BrowserRouter","Router","Navigate","amount","JSON","parse","localStorage","getItem","modal","lender","account","value","method","payOffAmount","ModalShow","props","show","setShow","handleClose","Reload","message","removeItem","Begin","console","log","socket","User","dispatch","window","ethereum","web3","eth","net","getId","netId","getAccounts","accounts","getBalance","balance","setState","token","Contract","abi","networks","address","dBankAddress","getInfo","connect","state","methods","call","from","bankBanlace","getToken","TokenBalance","getStake","stake","getLenderAmount","lenderAmount","index","getLender","getBorrowMethod","getBorrowBalanceOf","getTokenBorrow","getPayOffAmountEther","getPayOffAmountToken","emit","setItem","location","reload","Coc","send","toString","fetch","headers","body","stringify","e","preventDefault","withdraw","CocWithEtherDeposit","approve","CocWithToken","deposit","interest","lendToken","amountSend","lendEther","lendEtherDerectly","payOffEther","payOffToken","handleRequest","then","res","ok","Error","json","data","catch","error","loadBlockchainData","sendAddress","bind","coc","CocWithDeposit","input","amountsend","lendDerectly","lend","depositAmount","map","lendercon"],"mappings":"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","sourcesContent":["import { Tabs, Tab } from 'react-bootstrap'\r\nimport dBank from '../abis/dBank.json'\r\nimport React, { Component,useState } from 'react';\r\nimport Token from '../abis/Token.json'\r\nimport dbank from '../iuh.png';\r\nimport Modal from 'react-bootstrap/Modal';\r\nimport Button from 'react-bootstrap/Button';\r\nimport Web3 from 'web3';\r\nimport {userAccount} from './account';\r\nimport {\r\n    BrowserRouter as Router,\r\n    Navigate \r\n}from \"react-router-dom\"\r\nlet amount = JSON.parse(localStorage.getItem('amount')) || [0];\r\nlet modal = localStorage.getItem('modal') || ('');\r\nlet lender = [{account: '', value: 0, method: '', payOffAmount: 0}];\r\nfunction ModalShow(props){\r\n  const [show, setShow] = useState(true);\r\n  const handleClose = () => setShow(false);\r\n  const Reload = () =>{\r\n    setShow(false);\r\n  }\r\n  const message = props.message\r\n  localStorage.removeItem(\"modal\");\r\n  return(\r\n    <>\r\n      <Modal show={show} onHide={handleClose}>\r\n        <Modal.Header>\r\n          <Modal.Title className='m-auto'>{message}</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Footer>\r\n          <Button variant=\"primary\" onClick={Reload}>\r\n            Close\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </>)\r\n}\r\nexport default class Begin extends React.Component {\r\n  render() {\r\n    console.log(userAccount)\r\n    if(userAccount == 1){\r\n      return(\r\n        <User socket = {this.props.socket} />)}\r\n    return <Navigate to=\"/\" />\r\n  }\r\n}\r\nclass User extends Component{\r\n  async loadBlockchainData(dispatch) {\r\n    if(typeof window.ethereum !== 'undefined'){\r\n      const web3 = new Web3(window.ethereum)\r\n      const netId = await web3.eth.net.getId()\r\n      const accounts = await web3.eth.getAccounts()\r\n        const balance = await web3.eth.getBalance(accounts[0])\r\n        this.setState({account: accounts[0], balance: balance, web3: web3})\r\n        const token = new web3.eth.Contract(Token.abi, Token.networks[netId].address)\r\n        const dbank = new web3.eth.Contract(dBank.abi, dBank.networks[netId].address)\r\n        const dBankAddress = dBank.networks[netId].address\r\n        this.setState({token: token, dbank: dbank, dBankAddress: dBankAddress})\r\n\r\n        await this.getInfo(); // Sử dụng await để đợi cho hàm getInfo hoàn thành\r\n        this.setState({ connect: true }); // Sau đó mới gán giá trị true cho biến connect\r\n          \r\n    }\r\n  }\r\n  async getInfo(){\r\n    this.state.bankBanlace = await this.state.dbank.methods.getBalance(this.state.account).call({from:this.state.account})/ (10**18);\r\n    this.state.TokenBalance = await this.state.dbank.methods.getToken(this.state.account).call({from:this.state.account})/ (10**18);\r\n    this.state.stake = await this.state.dbank.methods.getStake(this.state.account).call({from:this.state.account}) / (10**18);\r\n\r\n    let lenderAmount = await this.state.dbank.methods.\r\n    getLenderAmount().call({from: this.state.account});\r\n    for (let index = 0; index < lenderAmount ; index++) {\r\n    lender[index]={account: await this.state.dbank.methods.getLender(index).call({from:this.state.account})};\r\n    lender[index].method = await this.state.dbank.methods.getBorrowMethod(index).call({from: this.state.account});\r\n    lender[index].value = lender[index].method  === \"Ether\" ? await this.state.dbank.methods.getBorrowBalanceOf(lender[index].account).call({from:this.state.account}) : \r\n    await this.state.dbank.methods.getTokenBorrow(lender[index].account).call({from:this.state.account});\r\n    lender[index].payOffAmount = lender[index].method == \"Ether\" ? \r\n    await this.state.dbank.methods.getPayOffAmountEther(lender[index].account).call({from: this.state.account}) :\r\n    await this.state.dbank.methods.getPayOffAmountToken(lender[index].account).call({from: this.state.account})\r\n    }\r\n  }\r\n  async sendAddress(){\r\n    this.props.socket.emit('join',this.state.account);\r\n    localStorage.setItem('modal',\"Send request successfully\");\r\n    window.location.reload()\r\n  }\r\n  handleRequest = (e) => {\r\n  e.preventDefault();\r\n  let account = this.state.account;\r\n  return fetch('http://localhost:3000/request', {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify({account: account}),\r\n  })\r\n    .then((res) => {\r\n      if (!res.ok) {\r\n        throw new Error('Network response was not ok');\r\n      }\r\n      return res.json();\r\n    })\r\n    .then((data) => {\r\n      localStorage.setItem('amount',data);\r\n      localStorage.setItem('modal',\"You have a request to stake\");\r\n      window.location.reload();\r\n    })\r\n    .catch((error) => {\r\n      window.location.reload();\r\n    });\r\n};\r\n  async coc(amount) {\r\n    if(this.state.dbank!=='undefined'){\r\n      try{\r\n      await this.state.dbank.methods.Coc().send({value: amount.toString(), from: this.state.account});\r\n      fetch('http://localhost:3000/method', {\r\n          method: 'POST',\r\n          headers: {\r\n          'Content-Type': 'application/json',\r\n          },\r\n          body: JSON.stringify({account: this.state.account, method: 'ether'}),\r\n          })\r\n      localStorage.setItem('amount',0);\r\n      localStorage.setItem('modal',\"You stake successfully\");\r\n      window.location.reload();\r\n      } catch (e) {\r\n        localStorage.setItem('modal',\"You stake fail\");\r\n        window.location.reload()\r\n      }\r\n    }\r\n  }\r\n  async withdraw(e) {\r\n    e.preventDefault()\r\n    if(this.state.dbank!=='undefined'){\r\n      try{\r\n        await this.state.dbank.methods.withdraw().send({from: this.state.account})\r\n        localStorage.setItem('modal',\"You withdraw successfully\");\r\n        window.location.reload()\r\n      } catch(e) {\r\n        localStorage.setItem('modal',\"You withdraw fail\");\r\n        window.location.reload()\r\n      }\r\n    }\r\n  }\r\n  async CocWithDeposit(amount){\r\n    if(this.state.dbank!=='undefined'){\r\n      try{\r\n        amount = amount * 10**18\r\n        await this.state.dbank.methods.CocWithEtherDeposit(amount.toString()).send({from:this.state.account});\r\n        fetch('http://localhost:3000/method', {\r\n          method: 'POST',\r\n          headers: {\r\n          'Content-Type': 'application/json',\r\n          },\r\n          body: JSON.stringify({account: this.state.account, method: 'ether'}),\r\n          })\r\n          localStorage.setItem('modal',\"You stake successfully\");\r\n        window.location.reload();\r\n        } catch (e) {\r\n        localStorage.setItem('modal',\"You stake fail\");\r\n        window.location.reload()\r\n      }\r\n    }\r\n  }\r\n  async CocWithToken(amount){\r\n    if(this.state.dbank!=='undefined'){\r\n      try{\r\n        amount = amount * 10**18;\r\n        await this.state.token.methods.approve(this.state.dBankAddress, amount.toString()).send({from: this.state.account})\r\n        await this.state.dbank.methods.CocWithToken(amount.toString()).send({from:this.state.account});\r\n        fetch('http://localhost:3000/method', {\r\n          method: 'POST',\r\n          headers: {\r\n          'Content-Type': 'application/json',\r\n          },\r\n          body: JSON.stringify({account: this.state.account, method: 'Token'}),\r\n          })\r\n        localStorage.setItem('modal',\"You stake successfully\");\r\n        window.location.reload();\r\n        } catch (e) {\r\n        localStorage.setItem('modal',\"You stake fail\");\r\n        window.location.reload()\r\n      }\r\n    }\r\n  }\r\n  async deposit(amount) {\r\n    if(this.state.dbank!=='undefined'){\r\n      try{\r\n        await this.state.dbank.methods.deposit().send({value: amount.toString(), from: this.state.account});\r\n        localStorage.setItem('modal',\"You deposit successfully\");\r\n        window.location.reload()\r\n      } catch (e) {\r\n        localStorage.setItem('modal',\"You deposit fail\");\r\n        window.location.reload();\r\n      }\r\n    }\r\n  }\r\n  async lendToken(address, amount, interest){\r\n    if(this.state.dbank!=='undefined'){\r\n      try{\r\n        amount = amount * 10**18;\r\n        await this.state.token.methods.approve(this.state.dBankAddress, amount.toString()).send({from: this.state.account})\r\n        await this.state.dbank.methods.lendToken(address, interest).send({value: amount, from:this.state.account});\r\n        localStorage.setItem('modal',\"You lend successfully\");\r\n        window.location.reload();\r\n        } catch (e) {\r\n        // báo lỗi nếu việc lấy giá trị bị lỗi\r\n        localStorage.setItem('modal',\"You lend fail\");\r\n        window.location.reload()\r\n      }\r\n    }\r\n  }\r\n  async lend(address,amountSend,interest) {\r\n    if(this.state.dbank!=='undefined'){\r\n      try{\r\n        amountSend *= 10**18\r\n        // Sau đó trả lại cho người dùng tiền đã thế chấp\r\n        await this.state.dbank.methods.lendEther(address,amountSend.toString(),interest).send({from: this.state.account});\r\n        localStorage.setItem('modal',\"You lend successfully\");\r\n        window.location.reload();\r\n      } catch (e) {\r\n        localStorage.setItem('modal',\"You lend fail\");\r\n        window.location.reload()\r\n      }\r\n    }\r\n  }\r\n  async lendDerectly(address,amountSend,interest) {\r\n    if(this.state.dbank!=='undefined'){\r\n      try{\r\n        amountSend *= 10**18\r\n        await this.state.dbank.methods.lendEtherDerectly(address,interest).send({value: amountSend.toString(),from: this.state.account});\r\n        localStorage.setItem('modal',\"You lend successfully\");\r\n        window.location.reload();\r\n      } catch (e) {\r\n        localStorage.setItem('modal',\"You lend fail\");\r\n        window.location.reload()\r\n      }\r\n    }\r\n  }\r\n  async payOffEther(address,amount) {\r\n    if(this.state.dbank!=='undefined'){\r\n      try{\r\n        await this.state.dbank.methods.payOffEther(address,amount).send({value: amount, from: this.state.account});\r\n        localStorage.setItem('modal',\"You PayOFf successfully\");\r\n        window.location.reload();\r\n      } catch (e) {\r\n        localStorage.setItem('modal',\"You PayOff fail\");\r\n        window.location.reload()\r\n\r\n      }\r\n    }\r\n  }\r\n  async payOffToken(address,amount){\r\n    if(this.state.dbank!=='undefined'){\r\n      try{\r\n        await this.state.token.methods.approve(this.state.dBankAddress,amount).send({from: this.state.account})\r\n        await this.state.dbank.methods.payOffToken(address).send({ from:this.state.account});\r\n        localStorage.setItem('modal',\"You PayOFf successfully\");\r\n        window.location.reload();\r\n        } catch (e) {\r\n        localStorage.setItem('modal',\"You PayOff fail\");\r\n        window.location.reload()\r\n      }\r\n    }\r\n  }\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      web3: 'undefined',\r\n      account: '',\r\n      token: null,\r\n      dbank: null,\r\n      balance: 0,\r\n      dBankAddress: null,\r\n      bankBanlace: 0,\r\n      TokenBalance: 0,\r\n      stake: 0,\r\n      connect: false,\r\n    }\r\n  }\r\n\r\n  // dùng để tạo giao diện website \r\n  render() {\r\n\r\n    return (\r\n      <div>\r\n        {modal !== '' && <ModalShow message = {modal} />}\r\n        <div className='text-monospace'>\r\n          {this.state.connect === false && <div onLoad={this.loadBlockchainData(this.props.dispatch)}></div> }\r\n          { this.state.connect === true && \r\n            <div>\r\n              <nav className=\"navbar navbar-primary fixed-top bg-primary flex-md-nowrap p-0 shadow\">\r\n                <a\r\n                  className=\"navbar-brand col-sm-3 col-md-2 mr-0\"\r\n                  href=\"#\"\r\n                  target=\"_blank\"\r\n                  rel=\"noopener noreferrer\"\r\n                >\r\n              <img src={dbank} className=\"App-logo m-auto \" alt=\"logo\" height=\"32\"/>\r\n              <b className='text-dark'>IUHBANK</b>\r\n                </a>\r\n              </nav>\r\n              <div className=\"container-fluid mt-5 text-center\">\r\n              <br></br>\r\n                <h1>Welcome to d₿ank</h1>\r\n                <h4>Your accoutn have : Ether: {this.state.bankBanlace}, Token: {this.state.TokenBalance},  Stake: {this.state.stake} </h4>\r\n                <br></br>\r\n                <div className=\"row\">\r\n                  <main role=\"main\" className=\"col-lg-12 d-flex text-center\">\r\n                    <div className=\"content mr-auto ml-auto\">\r\n                      <Tabs defaultActiveKey=\"profile\" id=\"uncontrolled-tab-example\">\r\n                        <Tab eventKey=\"send\" title = \"Send\">\r\n                          <div>\r\n                            <form>\r\n                            {(amount == 0) && \r\n                              <div>\r\n                                <br></br>\r\n                                <button type='button'  onClick={this.sendAddress.bind(this)}className='btn btn-primary'>Send Address</button><br></br>\r\n                                <br></br>\r\n                                <button type='submit' onClick={this.handleRequest.bind(this)}className='btn btn-primary'>Refresh</button>\r\n                              </div>\r\n                            }\r\n                            {(amount != 0) && \r\n                                <div>\r\n                                  <br></br>\r\n                                  <p>Do you want to deposit?</p>\r\n                                  <form onSubmit={(e) => {\r\n                                    e.preventDefault()\r\n                                    amount = amount * 10**18;\r\n                                    this.coc(amount);\r\n                                  }}>\r\n                                  {/* tạo form cho người dùng nhạp số lượng */}\r\n                                    <div className='form-group mr-sm-2'>\r\n                                      <br></br>\r\n                                      <input\r\n                                        type='number'\r\n                                        className=\"form-control form-control-md\"\r\n                                        placeholder= {amount}\r\n                                        disabled />\r\n                                    </div>\r\n                                    <button type=\"submit\" className='btn btn-primary'>DEPOSIT</button>{\" \"}\r\n                                    <button type=\"submit\" className='btn btn-primary' onClick={(e) => {\r\n                                      e.preventDefault()\r\n                                      amount = amount;\r\n                                    this.CocWithDeposit(amount);}} >Deposit with deposit</button><br/>\r\n                                    <button type=\"submit\" className='mt-2 btn btn-primary' onClick={(e) => {\r\n                                      e.preventDefault()\r\n                                      amount = amount;\r\n                                    this.CocWithToken(amount);}} >Deposit with Token</button>\r\n                                  </form>\r\n                                </div>}\r\n                            </form>\r\n                          </div>\r\n                        </Tab>\r\n                        <Tab eventKey=\"lend\" title=\"lend\">\r\n                          <div>\r\n                            <br></br>\r\n                            How much do you want to deposit?\r\n                            <br></br>\r\n                            (min. amount is 0.01 ETH)\r\n                            <br></br>\r\n                            (1 deposit is possible at the time)\r\n                            <br></br>\r\n                            <form >\r\n                              {/* tạo form cho người dùng nhạp số lượng */}\r\n                              <div className='form-group mr-sm-2'>\r\n                                <br></br>\r\n                                  <input\r\n                                    id='address'\r\n                                    type='text'\r\n                                    ref={(input) => { this.address = input }}\r\n                                    className=\"form-control form-control-md\"\r\n                                    placeholder='adress...'\r\n                                    required />\r\n                                  <br></br>\r\n                                  <input\r\n                                    id='amountSend'\r\n                                    type='number'\r\n                                    ref={(input) => { this.amountSend = input }}\r\n                                    className=\"form-control form-control-md\"\r\n                                    placeholder='amount to lend...'\r\n                                    required />\r\n                                  <br></br>\r\n                                  <input\r\n                                    id='interest'\r\n                                    type='number'\r\n                                    ref={(input) => { this.interest = input }}\r\n                                    className=\"form-control form-control-md\"\r\n                                    placeholder='interest to lend...'\r\n                                    required />\r\n                              </div>\r\n                              <button type='button' className='m-3 mt-0 btn btn-primary' onClick={(e) => {\r\n                                e.preventDefault()\r\n                                let amountsend = this.amountSend.value\r\n                                let interest = this.interest.value\r\n                                let address = this.address.value\r\n                                this.lendToken(address,amountsend,interest);\r\n                              }}>lendToken</button>\r\n                              <button type='button'  className='btn btn-primary m-3 mt-0' onClick={(e) => {\r\n                                e.preventDefault()\r\n                                let amountsend = this.amountSend.value\r\n                                let interest = this.interest.value\r\n                                let address = this.address.value\r\n                                this.lendDerectly(address,amountsend,interest);\r\n                              }}>lendDerectly</button>\r\n\r\n                              <button type='button' className='btn btn-primary m-3 mt-0' onClick={(e) => {\r\n                                e.preventDefault()\r\n                                let amountsend = this.amountSend.value\r\n                                let interest = this.interest.value\r\n                                let address = this.address.value\r\n                                this.lend(address,amountsend,interest);\r\n                              }}>lend</button>\r\n                            </form>\r\n                          </div>\r\n                        </Tab>\r\n                        <Tab eventKey=\"deposit\" title=\"Deposit\">\r\n                        <div>\r\n                          <br></br>\r\n                          How much do you want to deposit?\r\n                          <br></br>\r\n                          (min. amount is 0.01 ETH)\r\n                          <br></br>\r\n                          (1 deposit is possible at the time)\r\n                          <br></br>\r\n                          {/* khi người dùng nhập vào số lượng và nhấn nút submit \\ */}\r\n                          <form onSubmit={(e) => {\r\n                            e.preventDefault()\r\n                            let amount = this.depositAmount.value\r\n                            amount = amount * 10**18 //convert to wei\r\n                            this.deposit(amount);\r\n                          }}>\r\n                            <div className='form-group mr-sm-2'>\r\n                              <br></br>\r\n                              <input\r\n                                id='depositAmount'\r\n                                step=\"0.01\"\r\n                                type='number'\r\n                                ref={(input) => { this.depositAmount = input }}\r\n                                className=\"form-control form-control-md\"\r\n                                placeholder='amount...'\r\n                                required />\r\n                            </div>\r\n                            <button type='submit' className='btn btn-primary'>DEPOSIT</button>\r\n                          </form>\r\n                        </div>\r\n                        </Tab>\r\n                        <Tab eventKey=\"withdraw\" title=\"Withdraw\">\r\n                          <br></br>\r\n                          Do you want to withdraw + take interest?\r\n                          <br></br>\r\n                          <br></br>\r\n                          <div>\r\n                            {/* tương tự như trên khi người dùng nhấn nút withdraw sẽ thực hiện hàm withdraw */}\r\n                            <button type='submit' className='btn btn-primary' onClick={(e) => this.withdraw(e)}>WITHDRAW</button>\r\n                          </div>\r\n                        </Tab>\r\n                        <Tab eventKey=\"Payoff\" title=\"Pay off\">\r\n                          {lender != [] && lender.map(lendercon  => lendercon.value != 0 &&\r\n                            <div>\r\n                              <form >\r\n                                {/* tạo form cho người dùng nhạp số lượng */}\r\n                                <div className='form-group mr-sm-2'>\r\n                                  <br></br>\r\n                                  <input\r\n                                    type='text'\r\n                                    className=\"form-control form-control-md\"\r\n                                    placeholder= {lendercon.account} \r\n                                    disabled/>\r\n                                  <br></br>\r\n                                  <input\r\n                                    type='number'\r\n                                    className=\"form-control form-control-md\"\r\n                                    placeholder= {lendercon.value}\r\n                                    disabled\r\n                                    />\r\n                                  <br></br>\r\n                                  <input\r\n                                    type='text'\r\n                                    className=\"form-control form-control-md\"\r\n                                    placeholder= {lendercon.method}\r\n                                    disabled/>\r\n                                  <br></br>\r\n                                  <input\r\n                                    type='text'\r\n                                    className=\"form-control form-control-md\"\r\n                                    placeholder= {lendercon.payOffAmount} \r\n                                    disabled/>\r\n                                </div>\r\n                                <button type='button' className='m-3 mt-0 btn btn-primary' onClick={(e) => {\r\n                                  e.preventDefault()\r\n                                  this.payOffToken(lendercon.account, lendercon.payOffAmount);\r\n                                }}>Pay off by Token</button>\r\n                                <button type='button' className='btn btn-primary m-3 mt-0' onClick={(e) => {\r\n                                  e.preventDefault()\r\n                                  this.payOffEther(lendercon.account, lendercon.payOffAmount);\r\n                                }}>Pay off by Ether</button>\r\n                              </form>\r\n                            </div>)}\r\n                        </Tab>\r\n                      </Tabs>\r\n                    </div>\r\n                  </main>\r\n                </div>\r\n              </div>\r\n            </div>}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}"]},"metadata":{},"sourceType":"module"}